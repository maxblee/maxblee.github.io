<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>text_data package &#8212; Text Data 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/katex-math.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script>
    <script src="_static/katex_autorenderer.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="text_data.core package" href="text_data.core.html" />
    <link rel="prev" title="text_data" href="modules.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Text Data</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Max Lee Documentation Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_structure.html">How <code class="code docutils literal notranslate"><span class="pre">text_data</span></code> is organized</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="corpus.html">Corpus Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="exploration.html">Exploring Text Data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">text_data</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">text_data package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-text_data.display">text_data.display module</a></li>
<li><a class="reference internal" href="#module-text_data.index">text_data.index module</a></li>
<li><a class="reference internal" href="#module-text_data.multi_corpus">text_data.multi_corpus module</a></li>
<li><a class="reference internal" href="#module-text_data.query">text_data.query module</a></li>
<li><a class="reference internal" href="#module-text_data.tokenize">text_data.tokenize module</a></li>
<li><a class="reference internal" href="#module-text_data">Module contents</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="modules.html" title="Previous Chapter: text_data"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; text_data</span>
    </a>
  </li>
  <li>
    <a href="text_data.core.html" title="Next Chapter: text_data.core package"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">text_data.cor... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/text_data.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="text-data-package">
<h1>text_data package<a class="headerlink" href="#text-data-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="text_data.core.html">text_data.core package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="text_data.core.html#module-text_data.core">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-text_data.display">
<span id="text-data-display-module"></span><h2>text_data.display module<a class="headerlink" href="#module-text_data.display" title="Permalink to this headline">¶</a></h2>
<p>Renders data visualizations on <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> objects.</p>
<p>The graphics in this module are designed to work across different
metrics. You just have to pass them 1- or 2-dimensional numpy arrays.</p>
<p>This enables you to take the outputs from any functions inside of
<a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> and visualize them.</p>
<dl class="py function">
<dt id="text_data.display.display_score_table">
<code class="sig-prename descclassname">text_data.display.</code><code class="sig-name descname">display_score_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">words</span></em>, <em class="sig-param"><span class="n">scores</span></em>, <em class="sig-param"><span class="n">table_name</span><span class="o">=</span><span class="default_value">'Top Scores'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/display.html#display_score_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.display.display_score_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the top (or bottom scores) as a table.</p>
<p>It requires a 1-dimensional numpy array of the scores and the words,
much as you would receive from
<a class="reference internal" href="#text_data.index.WordIndex.get_top_words" title="text_data.index.WordIndex.get_top_words"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex.get_top_words()</span></code></a>. For a 2-dimensional
equivalent, use <a class="reference internal" href="#text_data.display.display_score_tables" title="text_data.display.display_score_tables"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_score_tables()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>words</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 1-dimensional numpy array of words.</p></li>
<li><p><strong>scores</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 1-dimensional numpy array of corresponding scores.</p></li>
<li><p><strong>table_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The name to give your table.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If you did not use a 1-dimensional array, or if the
    two arrays don’t have identical shapes.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.display.display_score_tables">
<code class="sig-prename descclassname">text_data.display.</code><code class="sig-name descname">display_score_tables</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">words</span></em>, <em class="sig-param"><span class="n">scores</span></em>, <em class="sig-param"><span class="n">table_names</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/display.html#display_score_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.display.display_score_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders two score tables.</p>
<p>This is the 2-dimensional equivalent of
<code class="xref py py-func docutils literal notranslate"><span class="pre">display_score_table()</span></code> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>words</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 2-dimensional matrix of words</p></li>
<li><p><strong>scores</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 2-dimensional matrix of scores</p></li>
<li><p><strong>table_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of names for your corresponding tables.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="code docutils literal notranslate"><span class="pre">words</span></code> and <code class="code docutils literal notranslate"><span class="pre">scores</span></code> aren’t both 2-dimensional
    arrays of the same shape, or if <code class="code docutils literal notranslate"><span class="pre">table_names</span></code>
    isn’t of the same length as the number of documents.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.display.frequency_map">
<code class="sig-prename descclassname">text_data.display.</code><code class="sig-name descname">frequency_map</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">word_vector</span></em>, <em class="sig-param"><span class="n">x_label</span><span class="o">=</span><span class="default_value">'Word Frequency'</span></em>, <em class="sig-param"><span class="n">y_label</span><span class="o">=</span><span class="default_value">'Score'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/display.html#frequency_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.display.frequency_map" title="Permalink to this definition">¶</a></dt>
<dd><p>A scatterplot scores over a corpus to their underlying frequencies.</p>
<p>I cribbed this idea from <a class="reference external" href="http://languagelog.ldc.upenn.edu/myl/Monroe.pdf">Monroe et al 2008</a>,
a great paper that uses it to show distributional problems in metrics that are trying to compare
two things.</p>
<p>The basic idea is that by creating a scatter plot mapping the frequencies of words
to scores, you can both figure out which scores are disproportionately high
or low <em>and</em> identify bias in whether your metric is excessively favoring common or rare words.</p>
<p>In order to render this graphic, your word vector has to conform to the number of words
in your index. If you feel the need to remove words to make the graphic
manageable to look at, consider using <a class="reference internal" href="#text_data.index.WordIndex.skip_words" title="text_data.index.WordIndex.skip_words"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex.skip_words()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a>) – A <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> object. This is used to get the
overall frequencies.</p></li>
<li><p><strong>word_vector</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 1-dimensional numpy array with floating point scores.</p></li>
<li><p><strong>x_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The name of the x label for your graphic.</p></li>
<li><p><strong>y_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The name of the y label for your graphic.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the word_vector doesn’t have 1 dimension or if the vector
    isn’t the same length as your vocabulary.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.display.heatmap">
<code class="sig-prename descclassname">text_data.display.</code><code class="sig-name descname">heatmap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">distance_matrix</span></em>, <em class="sig-param"><span class="n">left_indexes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">right_indexes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">left_name</span><span class="o">=</span><span class="default_value">'Left'</span></em>, <em class="sig-param"><span class="n">right_name</span><span class="o">=</span><span class="default_value">'Right'</span></em>, <em class="sig-param"><span class="n">metric_name</span><span class="o">=</span><span class="default_value">'Similarity'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/display.html#heatmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.display.heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays a heatmap displaying scores across a 2-dimensional matrix.</p>
<p>The purpose of this is to visually gauge which documents
are closest to each other given two sets of documents. (If you only have one
set of documents, the left and right can be the same.) The visual rendering
here is inspired by
<a class="reference external" href="https://www.tensorflow.org/hub/tutorials/semantic_similarity_with_tf_hub_universal_encoder">tensorflow’s Universal Sentence Encoder documentation</a>.
But, while you can use a universal sentence encoder to create the heatmap,
you can also easily use any of the metrics in scikit’s
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise_distances.html#sklearn.metrics.pairwise_distances">pairwise_distances function</a>.
Or, indeed, any other 2-dimensional matrix of floats will do the trick.</p>
<p>Note that the <code class="code docutils literal notranslate"><span class="pre">left_name</span></code> and <code class="code docutils literal notranslate"><span class="pre">right_name</span></code> must be different. In order to account
for this, this function automatically adds a suffix to both names if they are the same.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distance_matrix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A distance matrix of size M x N where M is the number of
documents on the left side and N is the number of documents on the right side.</p></li>
<li><p><strong>left_indexes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – Labels for the left side (the Y axis)</p></li>
<li><p><strong>right_indexes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – Labels for the right side (the X axis)</p></li>
<li><p><strong>left_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The Y axis label</p></li>
<li><p><strong>right_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The X axis label</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the side of the indexes doesn’t match the shape of the matrix
    of if there are not 2 dimensions in the distance matrix.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.display.histogram">
<code class="sig-prename descclassname">text_data.display.</code><code class="sig-name descname">histogram</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">values</span></em>, <em class="sig-param"><span class="n">x_label</span><span class="o">=</span><span class="default_value">'Score'</span></em>, <em class="sig-param"><span class="n">y_label</span><span class="o">=</span><span class="default_value">'Number of Documents'</span></em>, <em class="sig-param"><span class="n">x_scale</span><span class="o">=</span><span class="default_value">'linear'</span></em>, <em class="sig-param"><span class="n">y_scale</span><span class="o">=</span><span class="default_value">'linear'</span></em>, <em class="sig-param"><span class="n">max_bins</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/display.html#histogram"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.display.histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays a histogram of values.</p>
<p>This can be really useful for debugging the lengths of documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A numpy array of quantitative values.</p></li>
<li><p><strong>x_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A label for the x-axis.</p></li>
<li><p><strong>y_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A label for the y-axis.</p></li>
<li><p><strong>x_scale</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A continuous scale type, defined by <a class="reference external" href="https://altair-viz.github.io/user_guide/generated/core/altair.Scale.html">altair</a>.</p></li>
<li><p><strong>y_scale</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – <p>A continuous scale type, defined by <a class="reference external" href="https://altair-viz.github.io/user_guide/generated/core/altair.Scale.html">altair</a>.</p>
</p></li>
<li><p><strong>max_bins</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The maximum number of histogram bins.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.display.render_bar_chart">
<code class="sig-prename descclassname">text_data.display.</code><code class="sig-name descname">render_bar_chart</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">labels</span></em>, <em class="sig-param"><span class="n">vector_data</span></em>, <em class="sig-param"><span class="n">x_label</span><span class="o">=</span><span class="default_value">'Score'</span></em>, <em class="sig-param"><span class="n">y_label</span><span class="o">=</span><span class="default_value">'Word'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/display.html#render_bar_chart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.display.render_bar_chart" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders a bar chart given a 1-dimensional numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vector_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 1-dimensional numpy array of floating point
scores.</p></li>
<li><p><strong>labels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 1-dimensional numpy array of labels for the bar
chart (e.g. words)</p></li>
<li><p><strong>x_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The label for your x-axis (the score).</p></li>
<li><p><strong>y_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The label for the y-axis (the words).</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the numpy arrays have more than 1 dimension.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.display.render_multi_bar_chart">
<code class="sig-prename descclassname">text_data.display.</code><code class="sig-name descname">render_multi_bar_chart</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">labels</span></em>, <em class="sig-param"><span class="n">matrix_scores</span></em>, <em class="sig-param"><span class="n">document_names</span></em>, <em class="sig-param"><span class="n">y_label</span><span class="o">=</span><span class="default_value">'Score'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/display.html#render_multi_bar_chart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.display.render_multi_bar_chart" title="Permalink to this definition">¶</a></dt>
<dd><p>This renders a bar chart, grouped by document, showing word-document statistics.</p>
<p>It’s essentially the 2-dimensional matrix equivalent of <code class="xref py py-func docutils literal notranslate"><span class="pre">render_bar_chart()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 2-dimensional numpy array of words, like those passed from
<code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.get_top_scores()</span></code>.</p></li>
<li><p><strong>matrix_scores</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – A 2-dimensional numpy array of scores, like those
passed from <code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.get_top_scores()</span></code>.</p></li>
<li><p><strong>document_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of names for the documents. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>,
this will display numbers incrementing from 0.</p></li>
<li><p><strong>y_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The name for the y label (where the scores go).</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If your labels or your axes aren’t 2 dimensional or
    aren’t of the same size.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-text_data.index">
<span id="text-data-index-module"></span><h2>text_data.index module<a class="headerlink" href="#module-text_data.index" title="Permalink to this headline">¶</a></h2>
<p>This module handles the indexing of <cite>text_data</cite>.</p>
<p>Its two classes — <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> and <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> — form the central part
of this library.</p>
<p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> indexes lists of documents — which themselves form
lists of words or phrases — and offers utilities for performing
statistical calculations on your data.</p>
<p>Using the index, you can find out how many times a given word appeared in a
document or do more complicated things, like finding the TF-IDF values
for every single word across all of the documents in a corpus. In addition
to offering a bunch of different ways to compute statistics, <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>
also offers capabilities for creating new <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> objects — something
that can be very helpful if you’re trying to figure out what
makes a set of documents different from some other documents.</p>
<p>The <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>, meanwhile, is a wrapper over <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> that offers tools for searching
through sets of documents. In addition, it offers tools for visually seeing the results of search queries.</p>
<dl class="py class">
<dt id="text_data.index.Corpus">
<em class="property">class </em><code class="sig-prename descclassname">text_data.index.</code><code class="sig-name descname">Corpus</code><span class="sig-paren">(</span><em class="sig-param">documents</em>, <em class="sig-param">tokenizer=functools.partial(&lt;function postprocess_positions&gt;</em>, <span class="optional">[</span><em class="sig-param">&lt;method 'lower' of 'str' objects&gt;</em>, <span class="optional">]</span><em class="sig-param">functools.partial(&lt;function tokenize_regex_positions&gt;</em>, <em class="sig-param">'\\\\w+'</em>, <em class="sig-param">inverse_match=False))</em>, <em class="sig-param">sep=None</em>, <em class="sig-param">prefix=None</em>, <em class="sig-param">suffix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a></p>
<p>This is probably going to be your main entrypoint into <code class="code docutils literal notranslate"><span class="pre">text_data</span></code>.</p>
<p>The corpus holds the raw text, the index, and the tokenized text
of whatever you’re trying to analyze. Its primary role is to extend
the functionality of <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> to
support searching. This means that you can use the <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code>
to search for arbitrarily long phrases using boolean search
methods (AND, NOT, BUT).</p>
<p>In addition, it allows you to add indexes so you can calculate
statistics on phrases. By using <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>,
you can figure out the frequency or TF-IDF values of multi-word
phrases while still being able to search through your normal index.</p>
<p><strong>Initializing Data</strong></p>
<p>To instantiate the corpus, you need to include a list of documents
where each document is a string of text and a tokenizer. There
is a default tokenizer, which simply lowercases words and splits
documents on <code class="code docutils literal notranslate"><span class="pre">r&quot;\w+&quot;</span></code>. For most tasks, this will be insufficient.
But <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a> offers convenient ways that should
make building the vast majority of tokenizers easy.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> can be instantiated using <code class="code docutils literal notranslate"><span class="pre">__init__</span></code> or by
using <a class="reference internal" href="#text_data.index.Corpus.chunks" title="text_data.index.Corpus.chunks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">chunks()</span></code></a>, which yields a generator,
adding a mini-index. This allows you to technically perform
calculations in-memory on larger databases.</p>
<p>You can also initialize a <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> object by using the
<a class="reference internal" href="#text_data.index.Corpus.slice" title="text_data.index.Corpus.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a>, <a class="reference internal" href="#text_data.index.Corpus.copy" title="text_data.index.Corpus.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a>,
<a class="reference internal" href="#text_data.index.Corpus.split_off" title="text_data.index.Corpus.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>, or <a class="reference internal" href="#text_data.index.Corpus.concatenate" title="text_data.index.Corpus.concatenate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concatenate()</span></code></a>
methods. These methods work identically to their equivalent methods in
<a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> while updating extra data that
the corpus has, updating n-gram indexes, and automatically re-indexing the
corpus.</p>
<p><strong>Updating Data</strong></p>
<p>There are two methods for updating or adding data to the <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code>.
<a class="reference internal" href="#text_data.index.Corpus.update" title="text_data.index.Corpus.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update()</span></code></a> allows you to add new documents
to the corpus. <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
allows you to add multi-word indexes.</p>
<p><strong>Searching</strong></p>
<p>There are a few methods devoted to searching. <a class="reference internal" href="#text_data.index.Corpus.search_documents" title="text_data.index.Corpus.search_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_documents()</span></code></a>
allows you to find all of the individual documents matching a query.
<a class="reference internal" href="#text_data.index.Corpus.search_occurrences" title="text_data.index.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a> shows all of the individual
occurrences that matched your query. <a class="reference internal" href="#text_data.index.Corpus.ranked_search" title="text_data.index.Corpus.ranked_search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ranked_search()</span></code></a>
finds all of the individual occurrences and sorts them according to a variant
of their TF-IDF score.</p>
<p><strong>Statistics</strong></p>
<p>Three methods allow you to get statistics about a search.
<a class="reference internal" href="#text_data.index.Corpus.search_document_count" title="text_data.index.Corpus.search_document_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_document_count()</span></code></a> allows you to find
the total number of documents matching your query.
<a class="reference internal" href="#text_data.index.Corpus.search_document_freq" title="text_data.index.Corpus.search_document_freq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_document_freq()</span></code></a> shows the proportion
of documents matching your query. And <a class="reference internal" href="#text_data.index.Corpus.search_occurrence_count" title="text_data.index.Corpus.search_occurrence_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrence_count()</span></code></a>
finds the total number of matches you have for your query.</p>
<p><strong>Display</strong></p>
<p>There are a number of functions designed to help you visually see the results of your
query. <a class="reference internal" href="#text_data.index.Corpus.display_document" title="text_data.index.Corpus.display_document"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_document()</span></code></a> and
<a class="reference internal" href="#text_data.index.Corpus.display_documents" title="text_data.index.Corpus.display_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_documents()</span></code></a> render your documents in HTML.
<a class="reference internal" href="#text_data.index.Corpus.display_document_count" title="text_data.index.Corpus.display_document_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_document_count()</span></code></a>,
<a class="reference internal" href="#text_data.index.Corpus.display_document_frequency" title="text_data.index.Corpus.display_document_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_document_frequency()</span></code></a>,
and <a class="reference internal" href="#text_data.index.Corpus.display_occurrence_count" title="text_data.index.Corpus.display_occurrence_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_occurrence_count()</span></code></a>
all render bar charts showing the number of query results you got.
And <a class="reference internal" href="#text_data.index.Corpus.display_search_results" title="text_data.index.Corpus.display_search_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_search_results()</span></code></a> shows
the result of your search.</p>
<dl class="py attribute">
<dt id="text_data.index.Corpus.documents">
<code class="sig-name descname">documents</code><a class="headerlink" href="#text_data.index.Corpus.documents" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of all the raw, non-tokenized documents in the corpus.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.Corpus.tokenizer">
<code class="sig-name descname">tokenizer</code><a class="headerlink" href="#text_data.index.Corpus.tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that converts a list of strings (one of the documents
from documents into a list of words and a list of the character-level
positions where the words are located in the raw text). See <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.Corpus.tokenized_documents">
<code class="sig-name descname">tokenized_documents</code><a class="headerlink" href="#text_data.index.Corpus.tokenized_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of the tokenized documents (each a list of words)</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.Corpus.ngram_indexes">
<code class="sig-name descname">ngram_indexes</code><a class="headerlink" href="#text_data.index.Corpus.ngram_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> objects
for multi-word (n-gram) indexes. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.Corpus.ngram_sep">
<code class="sig-name descname">ngram_sep</code><a class="headerlink" href="#text_data.index.Corpus.ngram_sep" title="Permalink to this definition">¶</a></dt>
<dd><p>A separator in between words. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.Corpus.ngram_prefix">
<code class="sig-name descname">ngram_prefix</code><a class="headerlink" href="#text_data.index.Corpus.ngram_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>A prefix to go before any n-gram phrases. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.Corpus.ngram_suffix">
<code class="sig-name descname">ngram_suffix</code><a class="headerlink" href="#text_data.index.Corpus.ngram_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>A suffix to go after any n-gram phrases. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of the raw, un-tokenized texts.</p></li>
<li><p><strong>tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]) – A function to tokenize the documents. See <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a> for details.</p></li>
<li><p><strong>sep</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The separator you want to use for computing n-grams. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p></li>
<li><p><strong>prefix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The prefix you want to use for n-grams. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p></li>
<li><p><strong>suffix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The suffix you want to use for n-grams. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="text_data.index.Corpus.add_documents">
<code class="sig-name descname">add_documents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokenized_documents</span></em>, <em class="sig-param"><span class="n">indexed_locations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.add_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.add_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>This overrides the <a class="reference internal" href="#text_data.index.WordIndex.add_documents" title="text_data.index.WordIndex.add_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_documents()</span></code></a> method.</p>
<p>Because <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Corpus()</span></code></a> objects can have
n-gram indices, simply running <code class="code docutils literal notranslate"><span class="pre">add_documents</span></code> would
cause n-gram indices to go out of sync with the overall
corpus. In order to prevent that, this function raises
an error if you try to run it.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>NotImplementedError</strong> – Warns you to use <code class="code docutils literal notranslate"><span class="pre">~text_data.index.Corpus.update</span></code></p></li>
<li><p><strong>instead.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.add_ngram_index">
<code class="sig-name descname">add_ngram_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">suffix</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.add_ngram_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.add_ngram_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an n-gram index to the corpus.</p>
<p>This creates a <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> object
that you can access by typing <code class="code docutils literal notranslate"><span class="pre">self.ngram_indexes[n]</span></code>.</p>
<p>There are times when you might want to compute
TF-IDF scores, word frequency scores or similar scores
over a multi-word index. For instance, you might want to know how
frequently someone said ‘United States’ in a speech, without
caring how often they used the word ‘united’ or ‘states’.</p>
<p>This function helps you do that. It automatically splits up your
documents into an overlapping set of <code class="code docutils literal notranslate"><span class="pre">n</span></code>-length phrases.</p>
<p>Internally, this takes each of your tokenized documents,
merges them into lists of <code class="code docutils literal notranslate"><span class="pre">n</span></code>-length phrases, and joins
each of those lists by a space. However, you can customize
this behavior. If you set <code class="code docutils literal notranslate"><span class="pre">prefix</span></code>, each of the n-grams
will be prefixed by that string; if you set <code class="code docutils literal notranslate"><span class="pre">suffix</span></code>,
each of the n-grams will end with that string. And if you
set <code class="code docutils literal notranslate"><span class="pre">sep</span></code>, each of the words in the n-gram will be separated
by the separator.</p>
<p class="rubric">Example</p>
<p>Say you have a simple four word corpus. If you use the default
settings, here’s what your n-grams will look like:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;text data is fun&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">vocab_list</span>
<span class="go">[&#39;data is&#39;, &#39;is fun&#39;, &#39;text data&#39;]</span>
</pre></div>
</div>
<p>By altering <code class="code docutils literal notranslate"><span class="pre">sep</span></code>, <code class="code docutils literal notranslate"><span class="pre">prefix</span></code>, or <code class="code docutils literal notranslate"><span class="pre">suffix</span></code>,
you can alter that behavior. But, be careful to set <code class="code docutils literal notranslate"><span class="pre">default</span></code>
to <code class="code docutils literal notranslate"><span class="pre">False</span></code> if you want to change the behavior
from something you set up in <code class="code docutils literal notranslate"><span class="pre">__init__</span></code>. If you don’t,
this will use whatever settings you instantiated the class with.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;&lt;/w&gt;&lt;w&gt;&quot;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&lt;w&gt;&quot;</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;&lt;/w&gt;&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">vocab_list</span>
<span class="go">[&#39;&lt;w&gt;data&lt;/w&gt;&lt;w&gt;is&lt;/w&gt;&#39;, &#39;&lt;w&gt;is&lt;/w&gt;&lt;w&gt;fun&lt;/w&gt;&#39;, &#39;&lt;w&gt;text&lt;/w&gt;&lt;w&gt;data&lt;/w&gt;&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of n-grams (defaults to unigrams)</p></li>
<li><p><strong>default</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, will keep the values stored in init (including defaults)</p></li>
<li><p><strong>sep</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The separator in between words (if storing n-grams)</p></li>
<li><p><strong>prefix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The prefix before the first word of each n-gram</p></li>
<li><p><strong>suffix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The suffix after the last word of each n-gram</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.chunks">
<em class="property">classmethod </em><code class="sig-name descname">chunks</code><span class="sig-paren">(</span><em class="sig-param">documents</em>, <em class="sig-param">tokenizer=functools.partial(&lt;function postprocess_positions&gt;</em>, <span class="optional">[</span><em class="sig-param">&lt;method 'lower' of 'str' objects&gt;</em>, <span class="optional">]</span><em class="sig-param">functools.partial(&lt;function tokenize_regex_positions&gt;</em>, <em class="sig-param">'\\\\w+'</em>, <em class="sig-param">inverse_match=False))</em>, <em class="sig-param">sep=None</em>, <em class="sig-param">prefix=None</em>, <em class="sig-param">suffix=None</em>, <em class="sig-param">chunksize=1000000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates through documents, yielding a <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> with <code class="code docutils literal notranslate"><span class="pre">chunksize</span></code> documents.</p>
<p>This is designed to allow you to technically use <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> on large
document sets. However, you should note that searching for documents
will only work within the context of the current chunk.</p>
<p>The same is true for any frequency metrics. As such, you should probably
limit metrics to raw counts or aggregations you’ve derived from raw counts.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">docs</span> <span class="ow">in</span> <span class="n">Corpus</span><span class="o">.</span><span class="n">chunks</span><span class="p">([</span><span class="s2">&quot;chunk one&quot;</span><span class="p">,</span> <span class="s2">&quot;chunk two&quot;</span><span class="p">],</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">docs</span><span class="p">))</span>
<span class="go">1</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of raw text items (not tokenized)</p></li>
<li><p><strong>tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]) – A function to tokenize the documents</p></li>
<li><p><strong>sep</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The separator you want to use for computing n-grams.</p></li>
<li><p><strong>prefix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The prefix for n-grams.</p></li>
<li><p><strong>suffix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The suffix for n-grams.</p></li>
<li><p><strong>chunksize</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of documents in each chunk.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[~CorpusClass, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.concatenate">
<code class="sig-name descname">concatenate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.concatenate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>This combines two <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> objects into one, much like <a class="reference internal" href="#text_data.index.WordIndex.concatenate" title="text_data.index.WordIndex.concatenate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex.concatenate()</span></code></a>.</p>
<p>However, the new <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> has data from this corpus, including n-gram data.
Because of this, the two <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> objects must have the same keys for their
n-gram dictionaries.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_1</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am an example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_2</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am too&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_1</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_2</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined_corpus</span> <span class="o">=</span> <span class="n">corpus_1</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">corpus_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined_corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;am&#39;, 2), (&#39;i&#39;, 2), (&#39;an&#39;, 1), (&#39;example&#39;, 1), (&#39;too&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined_corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;i am&#39;, 2), (&#39;am an&#39;, 1), (&#39;am too&#39;, 1), (&#39;an example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a>) – another <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> object with the same ngram indexes.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the n-gram indexes between the two corpuses are not the same.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a shallow copy of a <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> object.</p>
<p>It extends the contents of <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> to also store data about
the objects themselves.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.display_document">
<code class="sig-name descname">display_document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">doc_idx</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.display_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Print an entire document, given its index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>doc_idx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.display_document_count">
<code class="sig-name descname">display_document_count</code><span class="sig-paren">(</span><em class="sig-param">queries</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_document_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.display_document_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a bar chart (in altair) showing the queries with the largest number of documents.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method requires that you have <code class="code docutils literal notranslate"><span class="pre">altair</span></code> installed. To install,
type <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">text_data[display]</span></code> or <code class="code docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">text_data</span> <span class="pre">-E</span> <span class="pre">display</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queries</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of queries (in the same form you use to search for things)</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.display_document_frequency">
<code class="sig-name descname">display_document_frequency</code><span class="sig-paren">(</span><em class="sig-param">queries</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_document_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.display_document_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays a bar chart showing the percentages of documents with a given query.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method requires that you have <code class="code docutils literal notranslate"><span class="pre">altair</span></code> installed. To install,
type <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">text_data[display]</span></code> or <code class="code docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">text_data</span> <span class="pre">-E</span> <span class="pre">display</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queries</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of queries</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A tokenizer for each query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.display_documents">
<code class="sig-name descname">display_documents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">documents</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.display_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>Display a number of documents, at the specified indexes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A list of document indexes.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.display_occurrence_count">
<code class="sig-name descname">display_occurrence_count</code><span class="sig-paren">(</span><em class="sig-param">queries</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_occurrence_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.display_occurrence_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Display a bar chart showing the number of times a query matches.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method requires that you have <code class="code docutils literal notranslate"><span class="pre">altair</span></code> installed. To install,
type <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">text_data[display]</span></code> or <code class="code docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">text_data</span> <span class="pre">-E</span> <span class="pre">display</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queries</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of queries</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.display_search_results">
<code class="sig-name descname">display_search_results</code><span class="sig-paren">(</span><em class="sig-param">search_query</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em>, <em class="sig-param">max_results=None</em>, <em class="sig-param">window_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_search_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.display_search_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows the results of a ranked query.</p>
<p>This function runs a query and then renders the result in human-readable
HTML. For each result, you will get a document ID and the count of the result.</p>
<p>In addition, all of the matching occurrences of phrases or words you
searched for will be highlighted in bold. You can optionally decide
how many results you want to return and how long you want each result to be
(up to the length of the whole document).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>search_query</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
<li><p><strong>max_results</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The maximum number of results. If None, returns all results.</p></li>
<li><p><strong>window_size</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The number of characters you want to return around the matching phrase.</p></li>
<li><p><strong>None</strong> (<em>If</em>) – </p></li>
<li><p><strong>the entire document.</strong> (<em>returns</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.flatten">
<code class="sig-name descname">flatten</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flattens a Corpus, converting it into a <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.ranked_search">
<code class="sig-name descname">ranked_search</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.ranked_search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.ranked_search" title="Permalink to this definition">¶</a></dt>
<dd><p>This produces a list of search responses in ranked order.</p>
<p>More specifically, the documents are ranked in order of the
sum of the TF-IDF scores for each word in the query
(with the exception of words that are negated using a NOT operator).</p>
<p>To compute the TF-IDF scores, I simply have computed the dot products
between the raw query counts and the TF-IDF scores of all the unique
words in the query. This is roughly equivalent to the <code class="code docutils literal notranslate"><span class="pre">ltn.lnn</span></code>
normalization scheme
<a class="reference external" href="https://nlp.stanford.edu/IR-book/html/htmledition/document-and-query-weighting-schemes-1.html">described in Manning</a>.
(The catch is that I have normalized the term-frequencies in the document
to the length of the document.)</p>
<p>Each item in the resulting list is a list referring to a single item.
The items inside each of those lists are of the same format you get from
<a class="reference internal" href="#text_data.index.Corpus.search_occurrences" title="text_data.index.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a>. The first item in
each list is either an item having the largest number of words in it
or is the item that’s the nearest to another match within the document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> – Query string</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – Function for tokenizing the results.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#text_data.index.PositionResult" title="text_data.index.PositionResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositionResult</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of tuples, each in the same format as <a class="reference internal" href="#text_data.index.Corpus.search_occurrences" title="text_data.index.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.search_document_count">
<code class="sig-name descname">search_document_count</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_document_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.search_document_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the total number of documents matching a query.</p>
<p>By entering a search, you can get the total number of documents
that match the query.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;the cow was hungry&quot;</span><span class="p">,</span> <span class="s2">&quot;the cow likes the grass&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_count</span><span class="p">(</span><span class="s2">&quot;cow&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_count</span><span class="p">(</span><span class="s2">&quot;grass&quot;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_count</span><span class="p">(</span><span class="s2">&quot;the&quot;</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.search_document_freq">
<code class="sig-name descname">search_document_freq</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_document_freq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.search_document_freq" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the percentage of documents that match a query.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;the cow was hungry&quot;</span><span class="p">,</span> <span class="s2">&quot;the cow likes the grass&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;cow&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;grass&quot;</span><span class="p">)</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;the grass&quot;</span><span class="p">)</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;the OR nonsense&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.search_documents">
<code class="sig-name descname">search_documents</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.search_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>Search documents from a query.</p>
<p>In order to figure out the intracacies of writing queries,
you should view <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a>. In general,
standard boolean (AND, OR, NOT) searches work perfectly reasonably.
You should generally not need to set <code class="code docutils literal notranslate"><span class="pre">query_tokenizer</span></code> to anything
other than the default (string split).</p>
<p>This produces a set of unique documents, where each document is
the index of the document. To view the documents by their ranked importance
(ranked largely using TF-IDF), use <a class="reference internal" href="#text_data.index.Corpus.ranked_search" title="text_data.index.Corpus.ranked_search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ranked_search()</span></code></a>.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is an example&quot;</span><span class="p">,</span> <span class="s2">&quot;here is another&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">search_documents</span><span class="p">(</span><span class="s2">&quot;is&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">search_documents</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A string boolean query (as defined in <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a>)</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A function to tokenize the words in your query. This
allows you to optionally search for words in your index that include
spaces (since it defaults to string.split).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.search_occurrence_count">
<code class="sig-name descname">search_occurrence_count</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_occurrence_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.search_occurrence_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the total number of occurrences you have for the given query.</p>
<p>This just gets the number of items in <a class="reference internal" href="#text_data.Corpus.search_occurrences" title="text_data.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a>.
As a result, searching for occurrences where two separate words occur will find
the total number of places where either word occurs within the set of documents
where both words appear.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;the cow was hungry&quot;</span><span class="p">,</span> <span class="s2">&quot;the cow likes the grass&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrence_count</span><span class="p">(</span><span class="s2">&quot;the&quot;</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrence_count</span><span class="p">(</span><span class="s2">&quot;the cow&quot;</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrence_count</span><span class="p">(</span><span class="s2">&quot;&#39;the cow&#39;&quot;</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.search_occurrences">
<code class="sig-name descname">search_occurrences</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_occurrences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.search_occurrences" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for matching positions within a search.</p>
<p>This allows you to figure out all of the occurrences
matching your query. In addition, this is used internally
to display search results.</p>
<p>Each matching position comes in the form of a tuple where
the first field <code class="code docutils literal notranslate"><span class="pre">doc_id</span></code> refers to the position
of the document, the second field <code class="code docutils literal notranslate"><span class="pre">first_idx</span></code>
refers to the starting index of the occurrence (among
the tokenized documents), <code class="code docutils literal notranslate"><span class="pre">last_idx</span></code> refers to the
last index of the occurrence, <code class="code docutils literal notranslate"><span class="pre">raw_start</span></code> refers
to the starting index of the occurrence from
<em>within the raw, non-tokenized documents.</em> <code class="code docutils literal notranslate"><span class="pre">raw_end</span></code>
refers to the <em>index after the last character of the matching
result</em> within the non-tokenized documents. There is not really
a reason behind this decision.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is fun&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrences</span><span class="p">(</span><span class="s2">&quot;&#39;this is&#39;&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">PositionResult(doc_id=0, first_idx=0, last_idx=1, raw_start=0, raw_end=7)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">documents</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">doc_id</span><span class="p">][</span><span class="n">result</span><span class="o">.</span><span class="n">raw_start</span><span class="p">:</span><span class="n">result</span><span class="o">.</span><span class="n">raw_end</span><span class="p">]</span>
<span class="go">&#39;this is&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">tokenized_documents</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">doc_id</span><span class="p">][</span><span class="n">result</span><span class="o">.</span><span class="n">first_idx</span><span class="p">:</span><span class="n">result</span><span class="o">.</span><span class="n">last_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[&#39;this&#39;, &#39;is&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The string query. See <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a> for details.</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizing function for the query.
See <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a> or <a class="reference internal" href="#text_data.index.Corpus.search_documents" title="text_data.index.Corpus.search_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_documents()</span></code></a>
for details.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<a class="reference internal" href="#text_data.index.PositionResult" title="text_data.index.PositionResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositionResult</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.slice">
<code class="sig-name descname">slice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> object only including the documents listed.</p>
<p>This overrides the method in <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex()</span></code></a>, which
does the same thing (but without making changes to the underlying document set).
This also creates slices of any of the n-gram indexes you have created.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This also changes the indexes for the new corpus so they all go from
0 to <code class="code docutils literal notranslate"><span class="pre">len(indexes)</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A set of document indexes you want to have in the new index.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">,</span> <span class="s2">&quot;yet another&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_corpus</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">slice</span><span class="p">({</span><span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sliced_corpus</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another&#39;, 1), (&#39;example&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.split_off">
<code class="sig-name descname">split_off</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.split_off"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.split_off" title="Permalink to this definition">¶</a></dt>
<dd><p>This operates like <a class="reference internal" href="#text_data.index.WordIndex.split_off" title="text_data.index.WordIndex.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>.</p>
<p>But it additionally maintains the state of the <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> data,
similar to how <a class="reference internal" href="#text_data.index.Corpus.slice" title="text_data.index.Corpus.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a> works.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am an example&quot;</span><span class="p">,</span> <span class="s2">&quot;so am i&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_data</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">split_off</span><span class="p">({</span><span class="mi">0</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;so am i&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_data</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;i am an example&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;am&#39;, 1), (&#39;i&#39;, 1), (&#39;so&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.to_index">
<code class="sig-name descname">to_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.to_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.to_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> object into a <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> object.</p>
<p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> objects are convenient because they allow
you to search across documents, in addition to computing statistics about them.
But sometimes, you don’t need that, and the added convenience comes with extra
memory requirements.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.Corpus.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">new_documents</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.Corpus.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds new documents to the corpus’s index and to the n-gram indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of new documents. The tokenizer used is the same
tokenizer used to initialize the corpus.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="text_data.index.PositionResult">
<em class="property">class </em><code class="sig-prename descclassname">text_data.index.</code><code class="sig-name descname">PositionResult</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">doc_id</span></em>, <em class="sig-param"><span class="n">first_idx</span></em>, <em class="sig-param"><span class="n">last_idx</span></em>, <em class="sig-param"><span class="n">raw_start</span></em>, <em class="sig-param"><span class="n">raw_end</span></em><span class="sig-paren">)</span><a class="headerlink" href="#text_data.index.PositionResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>This represents the position of a word or phrase within a document.</p>
<p>See <a class="reference internal" href="#text_data.index.Corpus.search_occurrences" title="text_data.index.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.Corpus.search_occurrences()</span></code></a> for more details and an example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>doc_id</strong> (<em>int</em>) – The index of the document within the index</p></li>
<li><p><strong>first_idx</strong> (<em>int</em>) – The index of the first word within the tokenized document at <code class="code docutils literal notranslate"><span class="pre">corpus.tokenized_documents[doc_id]</span></code>.</p></li>
<li><p><strong>last_idx</strong> (<em>int</em>) – The index of the last word within the tokenized document at <code class="code docutils literal notranslate"><span class="pre">corpus.tokenized_documents[doc_id]</span></code>.</p></li>
<li><p><strong>raw_start</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) – The starting character-level index within the raw string document at <code class="code docutils literal notranslate"><span class="pre">corpus.documents[doc_id]</span></code>.</p></li>
<li><p><strong>raw_end</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) – The index after the ending character-level index within the raw string document at <code class="code docutils literal notranslate"><span class="pre">corpus.documents[doc_id]</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="text_data.index.PositionResult.doc_id">
<code class="sig-name descname">doc_id</code><a class="headerlink" href="#text_data.index.PositionResult.doc_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.PositionResult.first_idx">
<code class="sig-name descname">first_idx</code><a class="headerlink" href="#text_data.index.PositionResult.first_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.PositionResult.last_idx">
<code class="sig-name descname">last_idx</code><a class="headerlink" href="#text_data.index.PositionResult.last_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.PositionResult.raw_end">
<code class="sig-name descname">raw_end</code><a class="headerlink" href="#text_data.index.PositionResult.raw_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.index.PositionResult.raw_start">
<code class="sig-name descname">raw_start</code><a class="headerlink" href="#text_data.index.PositionResult.raw_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="text_data.index.WordIndex">
<em class="property">class </em><code class="sig-prename descclassname">text_data.index.</code><code class="sig-name descname">WordIndex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokenized_documents</span></em>, <em class="sig-param"><span class="n">indexed_locations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An inverted, positional index containing the words in a corpus.</p>
<p>This is designed to allow people to be able to quickly compute statistics
about the language used across a corpus. The class offers a couple of broad
strategies for understanding the ways in which words are used across documents.</p>
<p><strong>Manipulating Indexes</strong>
These functions are designed to allow you to create new indexes based
on ones you already have. They operate kind of like slices and filter
functions in <code class="code docutils literal notranslate"><span class="pre">pandas</span></code>, where your goal is to be able to
create new data structures that you can analyze independently from
ones you’ve already created. Most of them can also be used
with method chaining. However, some of these functions remove
positional information from the index, so be careful.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#text_data.index.WordIndex.copy" title="text_data.index.WordIndex.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> creates an identical copy of a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>
object.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a>, <a class="reference internal" href="#text_data.index.WordIndex.slice_many" title="text_data.index.WordIndex.slice_many"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice_many()</span></code></a>,
and <a class="reference internal" href="#text_data.index.WordIndex.split_off" title="text_data.index.WordIndex.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>
all take sets of document indexes and create new indexes with only those
documents.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.add_documents" title="text_data.index.WordIndex.add_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_documents()</span></code></a> allows you to add new
documents into an existing <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> object.
<a class="reference internal" href="#text_data.index.WordIndex.concatenate" title="text_data.index.WordIndex.concatenate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concatenate()</span></code></a> similarly combines
<code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> objects into a single <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.flatten" title="text_data.index.WordIndex.flatten"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flatten()</span></code></a> takes a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>
and returns an identical index that only has one document.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.skip_words" title="text_data.index.WordIndex.skip_words"><code class="xref py py-meth docutils literal notranslate"><span class="pre">skip_words()</span></code></a> takes a set of words
and returns a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> that does not have those words.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.reset_index" title="text_data.index.WordIndex.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset_index()</span></code></a> changes the index of words.</p></li>
</ul>
<p><strong>Corpus Information</strong></p>
<p>A number of functions are designed to allow you to look up information
about the corpus. For instance, you can collect a sorted list
or a set of all the unique words in the corpus. Or you can get a list
of the most commonly appearing elements:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#text_data.index.WordIndex.vocab" title="text_data.index.WordIndex.vocab"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vocab</span></code></a> and <a class="reference internal" href="#text_data.index.WordIndex.vocab_list" title="text_data.index.WordIndex.vocab_list"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vocab_list</span></code></a>
both return the unique words or phrases appearing in the index.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.vocab_size" title="text_data.index.WordIndex.vocab_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vocab_size</span></code></a> gets the number of unique words in the index.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.num_words" title="text_data.index.WordIndex.num_words"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_words</span></code></a> gets the total number of words in the index.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.doc_lengths" title="text_data.index.WordIndex.doc_lengths"><code class="xref py py-attr docutils literal notranslate"><span class="pre">doc_lengths</span></code></a> gets a dictionary mapping documents to
the number of tokens, or words, they contain.</p></li>
</ul>
<p><strong>Word Statistics</strong></p>
<p>These allow you to gather statistics about single words
or about word, document pairs. For instance, you can see
how many words there are in the corpus, how many unique words there are,
or how often a particular word appears in a document.</p>
<p>The statistics generally fit into four categories.
The first category computes statistics about how often a specific word appears
in the corpus as a whole. The second category computes statistics
about how often a specific word appears in a specific document.
The third and fourth categories echo those first two categories
but perform the statistics efficiently across the corpus as a whole,
creating 1-dimensional numpy arrays in the case of the word-corpus
statistics and 2-dimensional numpy arrays in the case of the word-document
statistics. Functions in these latter two categories all end in
<code class="code docutils literal notranslate"><span class="pre">_vector</span></code> and <code class="code docutils literal notranslate"><span class="pre">_matrix</span></code> respectively.</p>
<p>Here’s how those statistics map to one another:</p>
<table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-text">Word Statistics</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Word-Corpus</p></th>
<th class="head"><p>Word-Document</p></th>
<th class="head"><p>Vector</p></th>
<th class="head"><p>Matrix</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#text_data.index.WordIndex.word_count" title="text_data.index.WordIndex.word_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_count()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.term_count" title="text_data.index.WordIndex.term_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">term_count()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.word_count_vector" title="text_data.index.WordIndex.word_count_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_count_vector()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.count_matrix" title="text_data.index.WordIndex.count_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count_matrix()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#text_data.index.WordIndex.word_frequency" title="text_data.index.WordIndex.word_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_frequency()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.term_frequency" title="text_data.index.WordIndex.term_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">term_frequency()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.word_freq_vector" title="text_data.index.WordIndex.word_freq_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_freq_vector()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.frequency_matrix" title="text_data.index.WordIndex.frequency_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">frequency_matrix()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#text_data.index.WordIndex.document_count" title="text_data.index.WordIndex.document_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">document_count()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.doc_count_vector" title="text_data.index.WordIndex.doc_count_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doc_count_vector()</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#text_data.index.WordIndex.document_frequency" title="text_data.index.WordIndex.document_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">document_frequency()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.doc_freq_vector" title="text_data.index.WordIndex.doc_freq_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doc_freq_vector()</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#text_data.index.WordIndex.idf" title="text_data.index.WordIndex.idf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">idf()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.idf_vector" title="text_data.index.WordIndex.idf_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">idf_vector()</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_word" title="text_data.index.WordIndex.odds_word"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_word()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_document" title="text_data.index.WordIndex.odds_document"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_document()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_vector" title="text_data.index.WordIndex.odds_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_vector()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_matrix" title="text_data.index.WordIndex.odds_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_matrix()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">__contains__</span></code></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.doc_contains" title="text_data.index.WordIndex.doc_contains"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doc_contains()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.one_hot_matrix" title="text_data.index.WordIndex.one_hot_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">one_hot_matrix()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.tfidf_matrix" title="text_data.index.WordIndex.tfidf_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tfidf_matrix()</span></code></a></p></td>
</tr>
</tbody>
</table>
<p>In the case of the vector and matrix calculations, the arrays
represent the unique words of the vocabulary,
presented in sorted order. As a result, you can safely run
element-wise calculations over the matrices.</p>
<p>In addition to the term vector and term-document matrix functions, there is
<a class="reference internal" href="#text_data.index.WordIndex.get_top_words" title="text_data.index.WordIndex.get_top_words"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_top_words()</span></code></a>, which is designed
to allow you to find the highest or lowest scores and their associated words along any
term vector or term-document matrix you please.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the most part, you will not want to instantiate <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> directly.
Instead, you will likely use <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a>, which subclasses
<code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>.</p>
<p>That’s because <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> offers utilities for searching through
documents. In addition, with the help of tools from <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a>,
instantiating <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> objects is a bit simpler than
instantiating <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> objects directly.</p>
<p>I particularly recommend that you <strong>do not</strong> instantiate the
<code class="code docutils literal notranslate"><span class="pre">indexed_locations</span></code> directly (i.e. outside of <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a>).
The only way you can do anything with <code class="code docutils literal notranslate"><span class="pre">indexed_locations</span></code> from outside of
<a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> is by using an internal attribute
and hacking through poorly documented Rust code.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenized_documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of documents where each document is a list of words.</p></li>
<li><p><strong>indexed_locations</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]) – A list of documents where each documents contains a list
of the start end positions of the words in <code class="code docutils literal notranslate"><span class="pre">tokenized_documents</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="text_data.index.WordIndex.add_documents">
<code class="sig-name descname">add_documents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokenized_documents</span></em>, <em class="sig-param"><span class="n">indexed_locations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.add_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.add_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>This function updates the index with new documents.</p>
<p>It operates similarly to <a class="reference internal" href="#text_data.index.Corpus.update" title="text_data.index.Corpus.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.Corpus.update()</span></code></a>,
taking new documents and mutating the existing one.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tokenized_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;im just a simple document&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">(</span><span class="n">tokenized_words</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">num_words</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">add_documents</span><span class="p">([</span><span class="s2">&quot;now im an entire corpus&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">num_words</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.concatenate">
<code class="sig-name descname">concatenate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">ignore_index</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.concatenate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> object with the documents of both this object and the other.</p>
<p>See <a class="reference internal" href="#text_data.multi_corpus.concatenate" title="text_data.multi_corpus.concatenate"><code class="xref py py-func docutils literal notranslate"><span class="pre">text_data.multi_corpus.concatenate()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ignore_index</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to <code class="code docutils literal notranslate"><span class="pre">True</span></code>, which is the default, the
document indexes will be re-indexed starting from 0.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="code docutils literal notranslate"><span class="pre">ignore_index</span></code> is set to <code class="code docutils literal notranslate"><span class="pre">False</span></code> and some
    of the indexes overlap.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a copy of itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.count_matrix">
<code class="sig-name descname">count_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.count_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.count_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matrix showing the number of times each word appeared in each document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">count_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.doc_contains">
<code class="sig-name descname">doc_contains</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.doc_contains"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.doc_contains" title="Permalink to this definition">¶</a></dt>
<dd><p>States whether the given document contains the word.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="s2">&quot;more words&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_contains</span><span class="p">(</span><span class="s2">&quot;more&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_contains</span><span class="p">(</span><span class="s2">&quot;more&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the document you’re looking up doesn’t exist.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.doc_count_vector">
<code class="sig-name descname">doc_count_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.doc_count_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.doc_count_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of documents each word appears in.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_count_vector</span><span class="p">()</span>
<span class="go">array([1., 2.])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.doc_freq_vector">
<code class="sig-name descname">doc_freq_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.doc_freq_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.doc_freq_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the proportion of documents each word appears in.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_freq_vector</span><span class="p">()</span>
<span class="go">array([0.5, 1. ])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.doc_lengths">
<em class="property">property </em><code class="sig-name descname">doc_lengths</code><a class="headerlink" href="#text_data.index.WordIndex.doc_lengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary mapping the document indices to their lengths.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">,</span> <span class="s2">&quot;a cat&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">doc_lengths</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.docs_with_word">
<code class="sig-name descname">docs_with_word</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.docs_with_word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.docs_with_word" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the documents containing a word.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another document&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">docs_with_word</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">docs_with_word</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.document_count">
<code class="sig-name descname">document_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.document_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.document_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of documents a word appears in.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_count</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_count</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.document_frequency">
<code class="sig-name descname">document_frequency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.document_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.document_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the percentage of documents that contain a word.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_frequency</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_frequency</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span>
<span class="go">0.5</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.flatten">
<code class="sig-name descname">flatten</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flattens a multi-document index into a single-document corpus.</p>
<p>This creates a new <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> object stripped of any positional
information that has a single document in it. However, the list of words
and their indexes remain.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am a document&quot;</span><span class="p">,</span> <span class="s2">&quot;so am i&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flattened</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">flattened</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span> <span class="o">==</span> <span class="n">flattened</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.frequency_matrix">
<code class="sig-name descname">frequency_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.frequency_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.frequency_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matrix showing the frequency of each word appearing in each document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">frequency_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]]</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.get_top_words">
<code class="sig-name descname">get_top_words</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">term_matrix</span></em>, <em class="sig-param"><span class="n">top_n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reverse</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.get_top_words"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.get_top_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the top values along a term matrix.</p>
<p>Given a matrix where each row represents a word in your vocabulary,
this returns a numpy matrix of those top values, along with an array
of their respective words.</p>
<p>You can choose the number of results you want to get by setting
<code class="code docutils literal notranslate"><span class="pre">top_n</span></code> to some positive value, or you can leave it be and return
all of the results in sorted order. Additionally, by setting
<code class="code docutils literal notranslate"><span class="pre">reverse</span></code> to False (instead of its default of <code class="code docutils literal notranslate"><span class="pre">True</span></code>), you can
return the scores from smallest to largest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>term_matrix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – a matrix of floats where each row represents a word</p></li>
<li><p><strong>top_n</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The number of values you want to return. If None, returns
all values.</p></li>
<li><p><strong>reverse</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true (the default), returns the N values with the highest scores.
If false, returns the N values with the lowest scores.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple of 2-dimensional numpy arrays, where the first item
is an array of the top-scoring words and the second item
is an array of the top scores themselves. Both arrays
are of the same size, that is <code class="code docutils literal notranslate"><span class="pre">min(self.vocab_size,</span> <span class="pre">top_n)</span></code>
by the number of columns in the term matrix.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="code docutils literal notranslate"><span class="pre">top_n</span></code> is less than 1, if there are
    not the same number of rows in the matrix as there are unique
    words in the index, or if the numpy array doesn’t have 1 or 2 dimensions.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The first thing you need to do in order to use this function is create
a 1- or 2-dimensional term matrix, where the number of rows
corresponds to the number of unique words in the corpus. Any of the
functions within <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> that ends in <code class="code docutils literal notranslate"><span class="pre">_matrix(**kwargs)</span></code>
(for 2-dimensional arrays) or <code class="code docutils literal notranslate"><span class="pre">_vector(**kwargs)</span></code> (for 1-dimensional
arrays) will do the trick here. I’ll show an example with both a
word count vector and a word count matrix:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;The cat is near the birds&quot;</span><span class="p">,</span> <span class="s2">&quot;The birds are distressed&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">get_top_words</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count_vector</span><span class="p">(),</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">(array([&#39;the&#39;, &#39;birds&#39;], dtype=&#39;&lt;U10&#39;), array([3., 2.]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">get_top_words</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">count_matrix</span><span class="p">(),</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(array([[&#39;the&#39;, &#39;the&#39;]], dtype=&#39;&lt;U10&#39;), array([[2., 1.]]))</span>
</pre></div>
</div>
<p>Similarly, you can return the scores from lowest to highest by setting <code class="code docutils literal notranslate"><span class="pre">reverse=False</span></code>.
(This is not the default.):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">get_top_words</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span> <span class="o">*</span> <span class="n">corpus</span><span class="o">.</span><span class="n">word_count_vector</span><span class="p">(),</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">(array([&#39;the&#39;, &#39;birds&#39;], dtype=&#39;&lt;U10&#39;), array([-3., -2.]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.idf">
<code class="sig-name descname">idf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.idf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.idf" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the inverse document frequency.</p>
<p>If the number of documents in your <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>
<code class="code docutils literal notranslate"><span class="pre">index</span></code> is <span class="math">\(N\)</span> and the document frequency from
<a class="reference internal" href="#text_data.index.WordIndex.document_frequency" title="text_data.index.WordIndex.document_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">document_frequency()</span></code></a> is
<span class="math">\(df\)</span>, the inverse document frequency is <span class="math">\(\frac{N}{df}\)</span>.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">idf</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">idf</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span>
<span class="go">2.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking for.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.idf_vector">
<code class="sig-name descname">idf_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.idf_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.idf_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the inverse document frequency vector.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">idf_vector</span><span class="p">()</span>
<span class="go">array([2., 1.])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.max_word_count">
<code class="sig-name descname">max_word_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.max_word_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.max_word_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the most common word and the number of times it appeared in the corpus.</p>
<p>Returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> if there are no words in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">max_word_count</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s2">&quot;a bird a plane superman&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">max_word_count</span><span class="p">()</span>
<span class="go">(&#39;a&#39;, 2)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.most_common">
<code class="sig-name descname">most_common</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num_words</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.most_common"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.most_common" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the most common items.</p>
<p>This is nearly identical to <code class="code docutils literal notranslate"><span class="pre">collections.Counter.most_common</span></code>.
However, unlike <cite>collections.Counter.most_common</cite>, the values that
are returned appear in alphabetical order.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i walked to the zoo&quot;</span><span class="p">,</span> <span class="s2">&quot;i bought a zoo&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;i&#39;, 2), (&#39;zoo&#39;, 2), (&#39;a&#39;, 1), (&#39;bought&#39;, 1), (&#39;the&#39;, 1), (&#39;to&#39;, 1), (&#39;walked&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[(&#39;i&#39;, 2), (&#39;zoo&#39;, 2)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_words</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The number of words you return. If you enter None
or you enter a number larger than the total number of words,
it returns all of the words, in sorted order from most common to least common.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.num_words">
<em class="property">property </em><code class="sig-name descname">num_words</code><a class="headerlink" href="#text_data.index.WordIndex.num_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of words in the corpus (not just unique).</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">num_words</span>
<span class="go">5</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.odds_document">
<code class="sig-name descname">odds_document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em>, <em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.odds_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the odds of finding a word in a document.</p>
<p>This is the equivalent of <a class="reference internal" href="#text_data.index.WordIndex.odds_word" title="text_data.index.WordIndex.odds_word"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_word()</span></code></a>.
But insteasd of calculating items at the word-corpus level, the calculations
are performed at the word-document level.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is a document&quot;</span><span class="p">,</span> <span class="s2">&quot;document two&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_document</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_document</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document</p></li>
<li><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, returns the log-odds of finding the word in the document.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the document doesn’t exist.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.odds_matrix">
<code class="sig-name descname">odds_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">add_k</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.odds_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the odds of finding a word in a document for every possible word-document pair.</p>
<p>Because not all words are likely to appear in all of the documents,
this implementation adds <code class="code docutils literal notranslate"><span class="pre">1</span></code> to all of the numerators before taking the
frequencies. So</p>
<p><span class="math">\(O(w) = \frac{c_{i} + 1}{N + \vert V \vert}\)</span></p>
<p>where <span class="math">\(\vert V \vert\)</span> is the total number of unique words in each document,
<span class="math">\(N\)</span> is the total number of total words in each document, and <span class="math">\(c_i\)</span>
is the count of a word in a document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_matrix</span><span class="p">()</span>
<span class="go">array([[0.33333333, 1.        ],</span>
<span class="go">       [1.        , 0.33333333],</span>
<span class="go">       [1.        , 1.        ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_matrix</span><span class="p">(</span><span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[-1.5849625,  0.       ],</span>
<span class="go">       [ 0.       , -1.5849625],</span>
<span class="go">       [ 0.       ,  0.       ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, computes the log-odds.</p></li>
<li><p><strong>add_k</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – This adds <code class="code docutils literal notranslate"><span class="pre">k</span></code> to each of the non-zero elements in the matrix.
Since <span class="math">\(\log{1} = 0\)</span>, this prevents 50 percent probabilities
from appearing to be the same as elements that don’t exist.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.odds_vector">
<code class="sig-name descname">odds_vector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.odds_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a vector of the odds of each word appearing at random.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_vector</span><span class="p">()</span>
<span class="go">array([0.2, 1. , 0.2, 0.2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_vector</span><span class="p">(</span><span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([-2.32192809,  0.        , -2.32192809, -2.32192809])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, returns the log odds.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.odds_word">
<code class="sig-name descname">odds_word</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.odds_word" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the odds of seeing a word at random.</p>
<p>In statistics, the <em>odds</em> of something happening are the probability
of it happening, versus the probability of it not happening,
that is <span class="math">\(\frac{p}{1 - p}\)</span>. The “log odds” of
something happening — the result of using <code class="code docutils literal notranslate"><span class="pre">self.log_odds_word</span></code> —
is similarly equivalent to <span class="math">\(log_{2}{\frac{p}{1 - p}}\)</span>.</p>
<p>(The probability in this case is simply the word frequency.)</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i like odds ratios&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_word</span><span class="p">(</span><span class="s2">&quot;odds&quot;</span><span class="p">),</span> <span class="mf">1.</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_word</span><span class="p">(</span><span class="s2">&quot;odds&quot;</span><span class="p">,</span> <span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mf">3.</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p></li>
<li><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, returns the</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.one_hot_matrix">
<code class="sig-name descname">one_hot_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.one_hot_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.one_hot_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matrix showing whether each given word appeared in each document.</p>
<p>For these matrices, all cells contain a floating point value of either a
1., if the word is in that document, or a 0. if the word is not in the document.</p>
<p>These are sometimes referred to as ‘one-hot encoding matrices’ in machine learning.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">corpus</span><span class="o">.</span><span class="n">one_hot_matrix</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.reset_index">
<code class="sig-name descname">reset_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_idx</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.reset_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.reset_index" title="Permalink to this definition">¶</a></dt>
<dd><p>An in-place operation that resets the document indexes for this corpus.</p>
<p>When you reset the index, all of the documents change their
values, starting at <code class="code docutils literal notranslate"><span class="pre">start_idx</span></code> (and incrementing from there). For the most
part, you will not need to do this, since most of the library
does not give you the option to change the document indexes. However,
it may be useful when you’re using <a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a>
or <a class="reference internal" href="#text_data.index.WordIndex.split_off" title="text_data.index.WordIndex.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>start_idx</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The first (lowest) document index you want to set.
Values must be positive. Defaults to 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.skip_words">
<code class="sig-name descname">skip_words</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">words</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.skip_words"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.skip_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> without any of the skipped words.</p>
<p>This enables you to create an index that does not contain rare
words, for example. The index will not have any positions
associated with them, so be careful when implementing
it on a <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a> object.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">skip_words</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;document&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;document&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;document&quot;</span> <span class="ow">in</span> <span class="n">corpus</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">without_document</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">skip_words</span><span class="p">(</span><span class="n">skip_words</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;document&quot;</span> <span class="ow">in</span> <span class="n">without_document</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.slice">
<code class="sig-name descname">slice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an index that just contains documents from the set of words.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A set of index values for the documents.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;example&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;another&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;example&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_idx</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">slice</span><span class="p">({</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sliced_idx</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_idx</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another&#39;, 1), (&#39;example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.slice_many">
<code class="sig-name descname">slice_many</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.slice_many"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.slice_many" title="Permalink to this definition">¶</a></dt>
<dd><p>This operates like <a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a> but creates multiple <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> objects.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">,</span> <span class="s2">&quot;yet another&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">third</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">slice_many</span><span class="p">([{</span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">}])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;example document&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">second</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;another example&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;yet another&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes_list</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – A list of sets of indexes. See <a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex.slice()</span></code></a> for details.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.split_off">
<code class="sig-name descname">split_off</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.split_off"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.split_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an index with just a set of documents, while removing them from the index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A set of index values for the documents.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This removes words from the index inplace. So be make sure you
want to do that before using this function.</p>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;example&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;another&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;example&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_idx</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">split_off</span><span class="p">({</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">split_idx</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_idx</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another&#39;, 1), (&#39;example&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;document&#39;, 1), (&#39;example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.term_count">
<code class="sig-name descname">term_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.term_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.term_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of times a word appeared in a document.</p>
<p>Assuming the document exists, returns 0 if the word does not
appear in the document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am just thinking random thoughts&quot;</span><span class="p">,</span> <span class="s2">&quot;am i&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">term_count</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">term_count</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If you selected a document</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.term_frequency">
<code class="sig-name descname">term_frequency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.term_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.term_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the proportion of words in document <code class="code docutils literal notranslate"><span class="pre">document</span></code> that are <code class="code docutils literal notranslate"><span class="pre">word</span></code>.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;just coming up with words&quot;</span><span class="p">,</span> <span class="s2">&quot;more words&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">term_frequency</span><span class="p">(</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">term_frequency</span><span class="p">(</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the document you’re looking up doesn’t exist</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.tfidf_matrix">
<code class="sig-name descname">tfidf_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">norm</span><span class="o">=</span><span class="default_value">'l2'</span></em>, <em class="sig-param"><span class="n">use_idf</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">smooth_idf</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">sublinear_tf</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">add_k</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.tfidf_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.tfidf_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a term-document TF-IDF matrix from the index.</p>
<p>In natural language processing, TF-IDF is a mechanism for finding
out which words are distinct across documents. It’s used particularly
widely in information retrieval, where your goal is to rank documents
that you know match a query by how relevant you think they’ll be.</p>
<p>The basic intuition goes like this: If a word appears particularly
frequently in a document, it’s probably more relevant to that document
than if the word occurred more rarely. But, some words are simply
common: If document X uses the word ‘the’ more often than the word
‘idiomatic,’ that really tells you more about the words ‘the’ and
‘idiomatic’ than it does about the document.</p>
<p>TF-IDF tries to balance these two competing interests by taking the
‘term frequency,’ or how often a word appears in the document,
and normalizing it by the ‘document frequency,’ or the proportion
of documents that contain the word. This has the effect of reducing
the weights of common words (and even setting the weights of some
very common words to 0 in some implementations).</p>
<p>It should be noted that there are a number of different implementations
of TF-IDF. Within information retrieval, TF-IDF is part of the <a class="reference external" href="https://en.wikipedia.org/wiki/SMART_Information_Retrieval_System">‘SMART
Information Retrieval System’</a>.
Although the exact equations can vary considerably, they typically follow the same approach:
First, they find some value to represent the frequency of each word in the
document. Often (but not always), this is just the raw number of times
in which a word appeared in the document. Then, they normalize that
based on the document frequency. And finally, they normalize
those values based on the length of the document, so that long documents
are not weighted more favorably (or less favorably) than shorter documents.</p>
<p>The approach that I have taken to this is shamelessly cribbed from
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfTransformer.html">scikit’s TfidfTransformer</a>.
Specifically, I’ve allowed for some customization of the specific formula
for TF-IDF while not including methods that require access to the raw
documents, which would be computationally expensive to perform. This allows
for the following options:</p>
<ul class="simple">
<li><p>You can set the term frequency to either take the raw count of the word
in the document (<span class="math">\(c_{t,d}\)</span>) or by using <code class="code docutils literal notranslate"><span class="pre">sublinear_tf=True</span></code>
and taking <span class="math">\(1 + \log_{2}{c_{t,d}}\)</span></p></li>
<li><p>You can skip taking the inverse document frequency <span class="math">\(df^{-1}\)</span>
altogether by setting <code class="code docutils literal notranslate"><span class="pre">use_idf=False</span></code> or you can smooth the inverse
document frequency by setting <code class="code docutils literal notranslate"><span class="pre">smooth_idf=True</span></code>.
This adds one to the numerator and the denominator. (<strong>Note:</strong> Because
this method is only run on a vocabulary of words that are in the corpus,
there can’t be any divide by zero errors, but this allows you to
replicate scikit’s <code class="code docutils literal notranslate"><span class="pre">TfidfTransformer</span></code>.)</p></li>
<li><p>You can add some number to the logged inverse document frequency
by setting <code class="code docutils literal notranslate"><span class="pre">add_k</span></code> to something other than 1. This is the only
difference between this implementation and scikits, as scikit automatically
setts <code class="code docutils literal notranslate"><span class="pre">k</span></code> at 1.</p></li>
<li><p>Finally, you can choose how to normalize the document lengths. By default,
this takes the L-2 norm, or <span class="math">\(\sqrt{\sum{w_{i,k}^{2}}}\)</span>, where <span class="math">\(w_{i,k}\)</span>
is the weight you get from multiplying the term frequency by the inverse document
frequency. But you can also set the norm to <code class="code docutils literal notranslate"><span class="pre">'l1'</span></code> to get the L1-norm,
or <span class="math">\(\sum{\vert w_{i,k} \vert}\)</span>. Or you can set it to <code class="code docutils literal notranslate"><span class="pre">None</span></code> to avoid
doing any document-length normalization at all.</p></li>
</ul>
<p class="rubric">Examples</p>
<p>To get a sense of the different options, let’s start by creating
a pure count matrix with this method. To do that, we’ll set
<code class="code docutils literal notranslate"><span class="pre">norm=None</span></code> so we’re not normalizing by the length of the document,
<code class="code docutils literal notranslate"><span class="pre">use_idf=False</span></code> so we’re not doing anything with the document
frequency, and <code class="code docutils literal notranslate"><span class="pre">sublinear_tf=False</span></code> so we’re not taking the
logged counts:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tfidf_count_matrix</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">tfidf_count_matrix</span><span class="p">,</span> <span class="n">corpus</span><span class="o">.</span><span class="n">count_matrix</span><span class="p">())</span>
</pre></div>
</div>
<p>In this particular case, setting <code class="code docutils literal notranslate"><span class="pre">sublinear_tf</span></code> to <code class="code docutils literal notranslate"><span class="pre">True</span></code>
will produce the same result since all of the counts are 1 or 0
and <span class="math">\(\log{1} + 1 = 1\)</span>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">tfidf_count_matrix</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, we can incorporate the inverse document frequency. Because the word
‘a’ appears in both documents, its inverse document frequency in is 1;
the inverse document frequency of ‘cat’ is 2, since ‘cat’ appears in half
of the documents. We’re additionally taking the base-2 log of the inverse document
frequency and adding 1 to the final result. So we get:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">idf_add_1</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smooth_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">idf_add_1</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]]</span>
</pre></div>
</div>
<p>Or we can add nothing to the logged values:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">idf</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smooth_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_k</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">idf</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span>
</pre></div>
</div>
<p>The L-1 norm normalizes the results by the sum of the absolute values of their
weights. In the case of the count matrix, this is equivalent to creating
the frequency matrix:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tfidf_freq_mat</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="n">use_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">tfidf_freq_mat</span><span class="p">,</span> <span class="n">corpus</span><span class="o">.</span><span class="n">frequency_matrix</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>norm</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Set to ‘l2’ for the L2 norm (square root of the sums of the square weights),
‘l1’ for the l1 norm (the summed absolute value, or None for no normalization).</p></li>
<li><p><strong>use_idf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If you set this to False, the weights will only include the term frequency
(adjusted however you like)</p></li>
<li><p><strong>smooth_idf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Adds a constant to the numerator and the denominator.</p></li>
<li><p><strong>sublinear_tf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Computes the term frequency in log space.</p></li>
<li><p><strong>add_k</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – This adds k to every value in the IDF. scikit adds 1
to all documents, but this allows for more variable computing
(e.g. adding 0 if you want to remove words appearing in every document)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.vocab">
<em class="property">property </em><code class="sig-name descname">vocab</code><a class="headerlink" href="#text_data.index.WordIndex.vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all of the unique words in the index.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">vocab</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.vocab_list">
<em class="property">property </em><code class="sig-name descname">vocab_list</code><a class="headerlink" href="#text_data.index.WordIndex.vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorted list of the words appearing in the index.</p>
<p>This is primarily intended for use in matrix or vector functions,
where the order of the words matters.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">vocab_list</span>
<span class="go">[&#39;a&#39;, &#39;and&#39;, &#39;cat&#39;, &#39;dog&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.vocab_size">
<em class="property">property </em><code class="sig-name descname">vocab_size</code><a class="headerlink" href="#text_data.index.WordIndex.vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of unique words in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">vocab_size</span>
<span class="go">4</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.word_count">
<code class="sig-name descname">word_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.word_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of times the word appeared.</p>
<p>Defaults to 0 if the word never appeared.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is a document&quot;</span><span class="p">,</span> <span class="s2">&quot;a bird and a plane&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="s2">&quot;malarkey&quot;</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The string word (or phrase).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.word_count_vector">
<code class="sig-name descname">word_count_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_count_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.word_count_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of times each word appeared in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count_vector</span><span class="p">()</span>
<span class="go">array([1., 3., 1., 1.])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.word_counter">
<code class="sig-name descname">word_counter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_counter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.word_counter" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps the documents containing a word to the number of times the word appeared.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a bird&quot;</span><span class="p">,</span> <span class="s2">&quot;a bird and a plane&quot;</span><span class="p">,</span> <span class="s2">&quot;two birds&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_counter</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary mapping the document index of the word to the number of times</dt><dd><p>it appeared in that document.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.word_freq_vector">
<code class="sig-name descname">word_freq_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_freq_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.word_freq_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the frequency in which each word appears over the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_freq_vector</span><span class="p">()</span>
<span class="go">array([0.16666667, 0.5       , 0.16666667, 0.16666667])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.index.WordIndex.word_frequency">
<code class="sig-name descname">word_frequency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.index.WordIndex.word_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the frequency in which the word appeared in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is fun&quot;</span><span class="p">,</span> <span class="s2">&quot;or is it&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">word_frequency</span><span class="p">(</span><span class="s2">&quot;fun&quot;</span><span class="p">),</span> <span class="mf">1.</span> <span class="o">/</span> <span class="mf">6.</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">word_frequency</span><span class="p">(</span><span class="s2">&quot;is&quot;</span><span class="p">),</span> <span class="mf">2.</span> <span class="o">/</span> <span class="mf">6.</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The string word or phrase.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-text_data.multi_corpus">
<span id="text-data-multi-corpus-module"></span><h2>text_data.multi_corpus module<a class="headerlink" href="#module-text_data.multi_corpus" title="Permalink to this headline">¶</a></h2>
<p>Tools and displays for handling multiple document sets.</p>
<p>These are primarily designed to provide features for merging
sets of documents so you can easy compute statistics on them.</p>
<dl class="py function">
<dt id="text_data.multi_corpus.concatenate">
<code class="sig-prename descclassname">text_data.multi_corpus.</code><code class="sig-name descname">concatenate</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">indexes</span></em>, <em class="sig-param"><span class="n">ignore_index</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/multi_corpus.html#concatenate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.multi_corpus.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenates an arbitrary number of <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ignore_index</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to <code class="code docutils literal notranslate"><span class="pre">True</span></code>, which is the default, the resulting
index has a reset index beginning at 0.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="code docutils literal notranslate"><span class="pre">ignore_index</span></code> is set to <code class="code docutils literal notranslate"><span class="pre">False</span></code> and there are overlapping
    document indexes.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_1</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;example&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_2</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;second&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_3</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;third&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">concatenate</span><span class="p">()</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">concatenate</span><span class="p">(</span><span class="n">corpus_1</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;document&#39;, 1), (&#39;example&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">concatenate</span><span class="p">(</span><span class="n">corpus_1</span><span class="p">,</span> <span class="n">corpus_2</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;document&#39;, 2), (&#39;example&#39;, 1), (&#39;second&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">concatenate</span><span class="p">(</span><span class="n">corpus_1</span><span class="p">,</span> <span class="n">corpus_2</span><span class="p">,</span> <span class="n">corpus_3</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;document&#39;, 3), (&#39;example&#39;, 1), (&#39;second&#39;, 1), (&#39;third&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.multi_corpus.flat_concat">
<code class="sig-prename descclassname">text_data.multi_corpus.</code><code class="sig-name descname">flat_concat</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/multi_corpus.html#flat_concat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.multi_corpus.flat_concat" title="Permalink to this definition">¶</a></dt>
<dd><p>This flattens a sequence of <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> objects and concatenates them.</p>
<p>This does not preserve any information about <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a> objects.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_1</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;example&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_2</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;another&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;set&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;of&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;documents&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">corpus_1</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">corpus_2</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">concatenate</span><span class="p">(</span><span class="n">corpus_1</span><span class="p">,</span> <span class="n">corpus_2</span><span class="p">))</span>
<span class="go">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">flat_concat</span><span class="p">(</span><span class="n">corpus_1</span><span class="p">,</span> <span class="n">corpus_2</span><span class="p">))</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a>) – A sequence of <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a> or <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a>
objects.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-text_data.query">
<span id="text-data-query-module"></span><h2>text_data.query module<a class="headerlink" href="#module-text_data.query" title="Permalink to this headline">¶</a></h2>
<p>This builds and runs search queries for <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>.</p>
<p>For the most part, you won’t be using this directly. Instead, you’ll likely
be using <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>. However, viewing the <code class="code docutils literal notranslate"><span class="pre">__repr__</span></code>
for the query you’re running can be helpful for debugging or validating
queries.</p>
<dl class="py class">
<dt id="text_data.query.Query">
<em class="property">class </em><code class="sig-prename descclassname">text_data.query.</code><code class="sig-name descname">Query</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/query.html#Query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.query.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents a query. This is used internaly by <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a> to handle searching.</p>
<p>The basic formula for writing queries should be familiar; all of the
queries are simple boolean phrases. But here are more complete specifications:</p>
<p>In order to search for places where two words appeared, you simply need
to type the two words:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;i am&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Searches using this query will look for documents where the words “i”
and “am” both appeared. To have them look for places where either
word appeared, use an “OR” query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;i OR am&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, you can look for documents where one word occurred but the other
didn’t using a NOT query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;i NOT am&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To search for places where the phrase “i am” appeared, use quotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;&#39;i am&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can use AND queries to limit the results of previous sets of queries.
For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;i OR am AND you&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will find places where “you” and <em>either</em> “I” or “am” appeared.</p>
<p>In order to search for the literal words ‘AND’, ‘OR’, or ‘NOT’,
you must encapsulate them in quotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;&#39;AND&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, you may customize the way your queries are parsed by passing
a tokenizer. By default, <code class="code docutils literal notranslate"><span class="pre">Query</span></code> identifies strings of text
that it needs to split and uses <code class="code docutils literal notranslate"><span class="pre">str.split</span></code> to split the strings.
But you can change how to split the text, which can be helpful/necessary
if the words you’re searching for have spaces in them. For instance,
this will split the words you’re querying by spaces, unless the words
are ‘united states’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">re</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">us_phrase</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(united states|\S+)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;he is from the united states&quot;</span><span class="p">,</span> <span class="n">query_tokenizer</span><span class="o">=</span><span class="n">us_phrase</span><span class="o">.</span><span class="n">findall</span><span class="p">)</span>
<span class="go">&lt;Query ([[QueryItem(words=[&#39;he&#39;, &#39;is&#39;, &#39;from&#39;, &#39;the&#39;, &#39;united states&#39;], exact=False, modifier=&#39;OR&#39;)]])&gt;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The human-readable query</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A function to tokenize phrases in the query
(Defaults to string.split).
<strong>Note:</strong> This specifically tokenizes individual phrases in the query.
As a result, the function does not need to handle quotations.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="text_data.query.QueryItem">
<em class="property">class </em><code class="sig-prename descclassname">text_data.query.</code><code class="sig-name descname">QueryItem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">words</span></em>, <em class="sig-param"><span class="n">exact</span></em>, <em class="sig-param"><span class="n">modifier</span></em><span class="sig-paren">)</span><a class="headerlink" href="#text_data.query.QueryItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p>This represents an set of words you want to search for.</p>
<p>Each query item has attached to it a set of words,
an identifier stating whether the query terms are part of
an exact phrase (i.e. whether the order matters)
and what kind of query (a boolean AND query, a boolean OR query, or a boolean NOT query),
is being performed on the query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>words</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – A list of words representing all of the words that will be searched for.</p></li>
<li><p><strong>exact</strong> (<em>bool</em>) – Whether the search terms are part of an exact phrase match</p></li>
<li><p><strong>modifier</strong> (<em>str</em>) – The boolean query (AND, OR, or NOT)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="text_data.query.QueryItem.exact">
<code class="sig-name descname">exact</code><a class="headerlink" href="#text_data.query.QueryItem.exact" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.query.QueryItem.modifier">
<code class="sig-name descname">modifier</code><a class="headerlink" href="#text_data.query.QueryItem.modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.query.QueryItem.words">
<code class="sig-name descname">words</code><a class="headerlink" href="#text_data.query.QueryItem.words" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-text_data.tokenize">
<span id="text-data-tokenize-module"></span><h2>text_data.tokenize module<a class="headerlink" href="#module-text_data.tokenize" title="Permalink to this headline">¶</a></h2>
<p>This is a module for tokenizing data.</p>
<p>The primary motivation behind this module is that effectively
presenting search results revolves around knowing the positions
of the words <em>prior</em> to tokenization. In order to handle these raw
positions, the index <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a> uses stores the
original character-level positions of words.</p>
<p>This module offers a default tokenizer that you can use
for <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>. However, you’ll likely need to customize
them for most applications. That said, doing so should not be difficult.</p>
<p>One of the functions in this module, <a class="reference internal" href="#text_data.tokenize.corpus_tokenizer" title="text_data.tokenize.corpus_tokenizer"><code class="xref py py-func docutils literal notranslate"><span class="pre">corpus_tokenizer()</span></code></a>,
is designed specifically to create tokenizers that can be used
directly by <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>. All you have to do
is create a regular expression that splits words from nonwords
and then create a series of postprocessing functions to clean the
text (including, optionally, removing tokens). If possible,
I would recommend taking this approach, since it allows you
to mostly ignore the picky preferences of the underlying API.</p>
<dl class="py function">
<dt id="text_data.tokenize.corpus_tokenizer">
<code class="sig-prename descclassname">text_data.tokenize.</code><code class="sig-name descname">corpus_tokenizer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">regex_patten</span></em>, <em class="sig-param"><span class="n">postprocess_funcs</span></em>, <em class="sig-param"><span class="n">inverse_match</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/tokenize.html#corpus_tokenizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.tokenize.corpus_tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>This is designed to make it easy to build a custom tokenizer for <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>.</p>
<p>It acts as a combination of <a class="reference internal" href="#text_data.tokenize.tokenize_regex_positions" title="text_data.tokenize.tokenize_regex_positions"><code class="xref py py-func docutils literal notranslate"><span class="pre">tokenize_regex_positions()</span></code></a> and
<a class="reference internal" href="#text_data.tokenize.postprocess_positions" title="text_data.tokenize.postprocess_positions"><code class="xref py py-func docutils literal notranslate"><span class="pre">postprocess_positions()</span></code></a>, making it simple to create
tokenizers for <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>.</p>
<p>In other words, if you pass the tokenizer a regular expression pattern, set <code class="code docutils literal notranslate"><span class="pre">inverse_match</span></code>
as you would for <a class="reference internal" href="#text_data.tokenize.tokenize_regex_positions" title="text_data.tokenize.tokenize_regex_positions"><code class="xref py py-func docutils literal notranslate"><span class="pre">tokenize_regex_positions()</span></code></a>, and add
a list of postprocessing functions as you would for <a class="reference internal" href="#text_data.tokenize.postprocess_positions" title="text_data.tokenize.postprocess_positions"><code class="xref py py-func docutils literal notranslate"><span class="pre">postprocess_positions()</span></code></a>,
this tokenizer will return a function that you can use directly as an argument in <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a>.</p>
<p class="rubric">Examples</p>
<p>Let’s say that we want to build a tokenizing function that splits on vowels or whitespace.
We also want to lowercase all of the remaining words:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">split_vowels</span> <span class="o">=</span> <span class="n">corpus_tokenizer</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[aeiou\s]+&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">],</span> <span class="n">inverse_match</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_vowels</span><span class="p">(</span><span class="s2">&quot;Them and you&quot;</span><span class="p">)</span>
<span class="go">([&#39;th&#39;, &#39;m&#39;, &#39;nd&#39;, &#39;y&#39;], [(0, 2), (3, 4), (6, 8), (9, 10)])</span>
</pre></div>
</div>
<p>You can additionally use this function to remove stopwords, although
<a class="reference external" href="http://languagelog.ldc.upenn.edu/myl/Monroe.pdf">I generally would recommend against it</a>.
The postprocessing functions optionally return a string or a <code class="code docutils literal notranslate"><span class="pre">NoneType</span></code>,
and <code class="code docutils literal notranslate"><span class="pre">None</span></code> values simply don’t get tokenized:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">skip_stopwords</span> <span class="o">=</span> <span class="n">corpus_tokenizer</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\w+&quot;</span><span class="p">,</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="s2">&quot;the&quot;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skip_stopwords</span><span class="p">(</span><span class="s2">&quot;I ran to the store&quot;</span><span class="p">)</span>
<span class="go">([&#39;I&#39;, &#39;ran&#39;, &#39;to&#39;, &#39;store&#39;], [(0, 1), (2, 5), (6, 8), (13, 18)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.tokenize.default_tokenizer">
<code class="sig-prename descclassname">text_data.tokenize.</code><code class="sig-name descname">default_tokenizer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">document</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>Tuple<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#text_data.tokenize.default_tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the default tokenizer for <code class="code docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code>.</p>
<p>It simply splits on words (<code class="code docutils literal notranslate"><span class="pre">&quot;\w+&quot;</span></code>) and lowercases words.</p>
</dd></dl>

<dl class="py function">
<dt id="text_data.tokenize.postprocess_positions">
<code class="sig-prename descclassname">text_data.tokenize.</code><code class="sig-name descname">postprocess_positions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">postprocess_funcs</span></em>, <em class="sig-param"><span class="n">tokenize_func</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/tokenize.html#postprocess_positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.tokenize.postprocess_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs postprocessing functions to produce final tokenized documents.</p>
<p>This function allows you to take <a class="reference internal" href="#text_data.tokenize.tokenize_regex_positions" title="text_data.tokenize.tokenize_regex_positions"><code class="xref py py-func docutils literal notranslate"><span class="pre">tokenize_regex_positions()</span></code></a>
(or something that has a similar function signature) and run postprocessing
on it. It requires that you also give it a document, which it will tokenize
using the tokenizing function you give it.</p>
<p>These postprocessing functions should take a string (i.e. one of the individual tokens),
but they can return either a string or None. If they return None, the token
will not appear in the final tokenized result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>postprocess_funcs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]) – A list of postprocessing functions (e.g. <code class="code docutils literal notranslate"><span class="pre">str.lower</span></code>)</p></li>
<li><p><strong>tokenize_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]) – A function that takes raw text and converts it into
a list of strings and a list of character-level positions
(e.g. the output of <a class="reference internal" href="#text_data.tokenize.tokenize_regex_positions" title="text_data.tokenize.tokenize_regex_positions"><code class="xref py py-func docutils literal notranslate"><span class="pre">text_data.tokenize.tokenize_regex_positions()</span></code></a>)</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The (single) text you want to tokenize.</p></li>
<li><p><strong>tokenized_docs</strong> – The tokenized results
(e.g. the output of <a class="reference internal" href="#text_data.tokenize.tokenize_regex_positions" title="text_data.tokenize.tokenize_regex_positions"><code class="xref py py-func docutils literal notranslate"><span class="pre">text_data.tokenize.tokenize_regex_positions()</span></code></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="text_data.tokenize.tokenize_regex_positions">
<code class="sig-prename descclassname">text_data.tokenize.</code><code class="sig-name descname">tokenize_regex_positions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pattern</span></em>, <em class="sig-param"><span class="n">document_text</span></em>, <em class="sig-param"><span class="n">inverse_match</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/tokenize.html#tokenize_regex_positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.tokenize.tokenize_regex_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all of the tokens matching a regular expression.</p>
<p>Returns the positions of those tokens along with the tokens themselves.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A raw regular expression string</p></li>
<li><p><strong>document_text</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The raw document text</p></li>
<li><p><strong>inverse_match</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, tokenizes the text between matches.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple consisting of the list of words and a list of tuples,
where each tuple represents the start and end character positions
of the phrase.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-text_data">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-text_data" title="Permalink to this headline">¶</a></h2>
<p>Top-level package for Text Data.</p>
<dl class="py class">
<dt id="text_data.Corpus">
<em class="property">class </em><code class="sig-prename descclassname">text_data.</code><code class="sig-name descname">Corpus</code><span class="sig-paren">(</span><em class="sig-param">documents</em>, <em class="sig-param">tokenizer=functools.partial(&lt;function postprocess_positions&gt;</em>, <span class="optional">[</span><em class="sig-param">&lt;method 'lower' of 'str' objects&gt;</em>, <span class="optional">]</span><em class="sig-param">functools.partial(&lt;function tokenize_regex_positions&gt;</em>, <em class="sig-param">'\\\\w+'</em>, <em class="sig-param">inverse_match=False))</em>, <em class="sig-param">sep=None</em>, <em class="sig-param">prefix=None</em>, <em class="sig-param">suffix=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a></p>
<p>This is probably going to be your main entrypoint into <code class="code docutils literal notranslate"><span class="pre">text_data</span></code>.</p>
<p>The corpus holds the raw text, the index, and the tokenized text
of whatever you’re trying to analyze. Its primary role is to extend
the functionality of <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> to
support searching. This means that you can use the <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code>
to search for arbitrarily long phrases using boolean search
methods (AND, NOT, BUT).</p>
<p>In addition, it allows you to add indexes so you can calculate
statistics on phrases. By using <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>,
you can figure out the frequency or TF-IDF values of multi-word
phrases while still being able to search through your normal index.</p>
<p><strong>Initializing Data</strong></p>
<p>To instantiate the corpus, you need to include a list of documents
where each document is a string of text and a tokenizer. There
is a default tokenizer, which simply lowercases words and splits
documents on <code class="code docutils literal notranslate"><span class="pre">r&quot;\w+&quot;</span></code>. For most tasks, this will be insufficient.
But <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a> offers convenient ways that should
make building the vast majority of tokenizers easy.</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> can be instantiated using <code class="code docutils literal notranslate"><span class="pre">__init__</span></code> or by
using <a class="reference internal" href="#text_data.index.Corpus.chunks" title="text_data.index.Corpus.chunks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">chunks()</span></code></a>, which yields a generator,
adding a mini-index. This allows you to technically perform
calculations in-memory on larger databases.</p>
<p>You can also initialize a <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> object by using the
<a class="reference internal" href="#text_data.index.Corpus.slice" title="text_data.index.Corpus.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a>, <a class="reference internal" href="#text_data.index.Corpus.copy" title="text_data.index.Corpus.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a>,
<a class="reference internal" href="#text_data.index.Corpus.split_off" title="text_data.index.Corpus.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>, or <a class="reference internal" href="#text_data.index.Corpus.concatenate" title="text_data.index.Corpus.concatenate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concatenate()</span></code></a>
methods. These methods work identically to their equivalent methods in
<a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.WordIndex</span></code></a> while updating extra data that
the corpus has, updating n-gram indexes, and automatically re-indexing the
corpus.</p>
<p><strong>Updating Data</strong></p>
<p>There are two methods for updating or adding data to the <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code>.
<a class="reference internal" href="#text_data.index.Corpus.update" title="text_data.index.Corpus.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update()</span></code></a> allows you to add new documents
to the corpus. <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
allows you to add multi-word indexes.</p>
<p><strong>Searching</strong></p>
<p>There are a few methods devoted to searching. <a class="reference internal" href="#text_data.index.Corpus.search_documents" title="text_data.index.Corpus.search_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_documents()</span></code></a>
allows you to find all of the individual documents matching a query.
<a class="reference internal" href="#text_data.index.Corpus.search_occurrences" title="text_data.index.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a> shows all of the individual
occurrences that matched your query. <a class="reference internal" href="#text_data.index.Corpus.ranked_search" title="text_data.index.Corpus.ranked_search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ranked_search()</span></code></a>
finds all of the individual occurrences and sorts them according to a variant
of their TF-IDF score.</p>
<p><strong>Statistics</strong></p>
<p>Three methods allow you to get statistics about a search.
<a class="reference internal" href="#text_data.index.Corpus.search_document_count" title="text_data.index.Corpus.search_document_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_document_count()</span></code></a> allows you to find
the total number of documents matching your query.
<a class="reference internal" href="#text_data.index.Corpus.search_document_freq" title="text_data.index.Corpus.search_document_freq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_document_freq()</span></code></a> shows the proportion
of documents matching your query. And <a class="reference internal" href="#text_data.index.Corpus.search_occurrence_count" title="text_data.index.Corpus.search_occurrence_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrence_count()</span></code></a>
finds the total number of matches you have for your query.</p>
<p><strong>Display</strong></p>
<p>There are a number of functions designed to help you visually see the results of your
query. <a class="reference internal" href="#text_data.index.Corpus.display_document" title="text_data.index.Corpus.display_document"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_document()</span></code></a> and
<a class="reference internal" href="#text_data.index.Corpus.display_documents" title="text_data.index.Corpus.display_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_documents()</span></code></a> render your documents in HTML.
<a class="reference internal" href="#text_data.index.Corpus.display_document_count" title="text_data.index.Corpus.display_document_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_document_count()</span></code></a>,
<a class="reference internal" href="#text_data.index.Corpus.display_document_frequency" title="text_data.index.Corpus.display_document_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_document_frequency()</span></code></a>,
and <a class="reference internal" href="#text_data.index.Corpus.display_occurrence_count" title="text_data.index.Corpus.display_occurrence_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_occurrence_count()</span></code></a>
all render bar charts showing the number of query results you got.
And <a class="reference internal" href="#text_data.index.Corpus.display_search_results" title="text_data.index.Corpus.display_search_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">display_search_results()</span></code></a> shows
the result of your search.</p>
<dl class="py attribute">
<dt id="text_data.Corpus.documents">
<code class="sig-name descname">documents</code><a class="headerlink" href="#text_data.Corpus.documents" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of all the raw, non-tokenized documents in the corpus.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.Corpus.tokenizer">
<code class="sig-name descname">tokenizer</code><a class="headerlink" href="#text_data.Corpus.tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that converts a list of strings (one of the documents
from documents into a list of words and a list of the character-level
positions where the words are located in the raw text). See <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.Corpus.tokenized_documents">
<code class="sig-name descname">tokenized_documents</code><a class="headerlink" href="#text_data.Corpus.tokenized_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of the tokenized documents (each a list of words)</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.Corpus.ngram_indexes">
<code class="sig-name descname">ngram_indexes</code><a class="headerlink" href="#text_data.Corpus.ngram_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> objects
for multi-word (n-gram) indexes. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.Corpus.ngram_sep">
<code class="sig-name descname">ngram_sep</code><a class="headerlink" href="#text_data.Corpus.ngram_sep" title="Permalink to this definition">¶</a></dt>
<dd><p>A separator in between words. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.Corpus.ngram_prefix">
<code class="sig-name descname">ngram_prefix</code><a class="headerlink" href="#text_data.Corpus.ngram_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>A prefix to go before any n-gram phrases. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="py attribute">
<dt id="text_data.Corpus.ngram_suffix">
<code class="sig-name descname">ngram_suffix</code><a class="headerlink" href="#text_data.Corpus.ngram_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>A suffix to go after any n-gram phrases. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of the raw, un-tokenized texts.</p></li>
<li><p><strong>tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]) – A function to tokenize the documents. See <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a> for details.</p></li>
<li><p><strong>sep</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The separator you want to use for computing n-grams. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p></li>
<li><p><strong>prefix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The prefix you want to use for n-grams. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p></li>
<li><p><strong>suffix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The suffix you want to use for n-grams. See <a class="reference internal" href="#text_data.index.Corpus.add_ngram_index" title="text_data.index.Corpus.add_ngram_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_ngram_index()</span></code></a>
for details.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="text_data.Corpus.add_documents">
<code class="sig-name descname">add_documents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokenized_documents</span></em>, <em class="sig-param"><span class="n">indexed_locations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.add_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.add_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>This overrides the <a class="reference internal" href="#text_data.index.WordIndex.add_documents" title="text_data.index.WordIndex.add_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_documents()</span></code></a> method.</p>
<p>Because <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Corpus()</span></code></a> objects can have
n-gram indices, simply running <code class="code docutils literal notranslate"><span class="pre">add_documents</span></code> would
cause n-gram indices to go out of sync with the overall
corpus. In order to prevent that, this function raises
an error if you try to run it.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>NotImplementedError</strong> – Warns you to use <code class="code docutils literal notranslate"><span class="pre">~text_data.index.Corpus.update</span></code></p></li>
<li><p><strong>instead.</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.add_ngram_index">
<code class="sig-name descname">add_ngram_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">suffix</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.add_ngram_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.add_ngram_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an n-gram index to the corpus.</p>
<p>This creates a <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> object
that you can access by typing <code class="code docutils literal notranslate"><span class="pre">self.ngram_indexes[n]</span></code>.</p>
<p>There are times when you might want to compute
TF-IDF scores, word frequency scores or similar scores
over a multi-word index. For instance, you might want to know how
frequently someone said ‘United States’ in a speech, without
caring how often they used the word ‘united’ or ‘states’.</p>
<p>This function helps you do that. It automatically splits up your
documents into an overlapping set of <code class="code docutils literal notranslate"><span class="pre">n</span></code>-length phrases.</p>
<p>Internally, this takes each of your tokenized documents,
merges them into lists of <code class="code docutils literal notranslate"><span class="pre">n</span></code>-length phrases, and joins
each of those lists by a space. However, you can customize
this behavior. If you set <code class="code docutils literal notranslate"><span class="pre">prefix</span></code>, each of the n-grams
will be prefixed by that string; if you set <code class="code docutils literal notranslate"><span class="pre">suffix</span></code>,
each of the n-grams will end with that string. And if you
set <code class="code docutils literal notranslate"><span class="pre">sep</span></code>, each of the words in the n-gram will be separated
by the separator.</p>
<p class="rubric">Example</p>
<p>Say you have a simple four word corpus. If you use the default
settings, here’s what your n-grams will look like:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;text data is fun&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">vocab_list</span>
<span class="go">[&#39;data is&#39;, &#39;is fun&#39;, &#39;text data&#39;]</span>
</pre></div>
</div>
<p>By altering <code class="code docutils literal notranslate"><span class="pre">sep</span></code>, <code class="code docutils literal notranslate"><span class="pre">prefix</span></code>, or <code class="code docutils literal notranslate"><span class="pre">suffix</span></code>,
you can alter that behavior. But, be careful to set <code class="code docutils literal notranslate"><span class="pre">default</span></code>
to <code class="code docutils literal notranslate"><span class="pre">False</span></code> if you want to change the behavior
from something you set up in <code class="code docutils literal notranslate"><span class="pre">__init__</span></code>. If you don’t,
this will use whatever settings you instantiated the class with.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;&lt;/w&gt;&lt;w&gt;&quot;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&lt;w&gt;&quot;</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;&lt;/w&gt;&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">vocab_list</span>
<span class="go">[&#39;&lt;w&gt;data&lt;/w&gt;&lt;w&gt;is&lt;/w&gt;&#39;, &#39;&lt;w&gt;is&lt;/w&gt;&lt;w&gt;fun&lt;/w&gt;&#39;, &#39;&lt;w&gt;text&lt;/w&gt;&lt;w&gt;data&lt;/w&gt;&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of n-grams (defaults to unigrams)</p></li>
<li><p><strong>default</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, will keep the values stored in init (including defaults)</p></li>
<li><p><strong>sep</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The separator in between words (if storing n-grams)</p></li>
<li><p><strong>prefix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The prefix before the first word of each n-gram</p></li>
<li><p><strong>suffix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The suffix after the last word of each n-gram</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.chunks">
<em class="property">classmethod </em><code class="sig-name descname">chunks</code><span class="sig-paren">(</span><em class="sig-param">documents</em>, <em class="sig-param">tokenizer=functools.partial(&lt;function postprocess_positions&gt;</em>, <span class="optional">[</span><em class="sig-param">&lt;method 'lower' of 'str' objects&gt;</em>, <span class="optional">]</span><em class="sig-param">functools.partial(&lt;function tokenize_regex_positions&gt;</em>, <em class="sig-param">'\\\\w+'</em>, <em class="sig-param">inverse_match=False))</em>, <em class="sig-param">sep=None</em>, <em class="sig-param">prefix=None</em>, <em class="sig-param">suffix=None</em>, <em class="sig-param">chunksize=1000000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.chunks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates through documents, yielding a <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> with <code class="code docutils literal notranslate"><span class="pre">chunksize</span></code> documents.</p>
<p>This is designed to allow you to technically use <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> on large
document sets. However, you should note that searching for documents
will only work within the context of the current chunk.</p>
<p>The same is true for any frequency metrics. As such, you should probably
limit metrics to raw counts or aggregations you’ve derived from raw counts.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">docs</span> <span class="ow">in</span> <span class="n">Corpus</span><span class="o">.</span><span class="n">chunks</span><span class="p">([</span><span class="s2">&quot;chunk one&quot;</span><span class="p">,</span> <span class="s2">&quot;chunk two&quot;</span><span class="p">],</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">docs</span><span class="p">))</span>
<span class="go">1</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of raw text items (not tokenized)</p></li>
<li><p><strong>tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]) – A function to tokenize the documents</p></li>
<li><p><strong>sep</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The separator you want to use for computing n-grams.</p></li>
<li><p><strong>prefix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The prefix for n-grams.</p></li>
<li><p><strong>suffix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The suffix for n-grams.</p></li>
<li><p><strong>chunksize</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of documents in each chunk.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[~CorpusClass, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.concatenate">
<code class="sig-name descname">concatenate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.concatenate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>This combines two <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> objects into one, much like <a class="reference internal" href="#text_data.index.WordIndex.concatenate" title="text_data.index.WordIndex.concatenate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex.concatenate()</span></code></a>.</p>
<p>However, the new <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> has data from this corpus, including n-gram data.
Because of this, the two <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> objects must have the same keys for their
n-gram dictionaries.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_1</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am an example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_2</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am too&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_1</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus_2</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined_corpus</span> <span class="o">=</span> <span class="n">corpus_1</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">corpus_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined_corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;am&#39;, 2), (&#39;i&#39;, 2), (&#39;an&#39;, 1), (&#39;example&#39;, 1), (&#39;too&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined_corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;i am&#39;, 2), (&#39;am an&#39;, 1), (&#39;am too&#39;, 1), (&#39;an example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a>) – another <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> object with the same ngram indexes.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the n-gram indexes between the two corpuses are not the same.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a shallow copy of a <a class="reference internal" href="#text_data.Corpus" title="text_data.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> object.</p>
<p>It extends the contents of <a class="reference internal" href="#text_data.Corpus" title="text_data.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> to also store data about
the objects themselves.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.display_document">
<code class="sig-name descname">display_document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">doc_idx</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.display_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Print an entire document, given its index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>doc_idx</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.display_document_count">
<code class="sig-name descname">display_document_count</code><span class="sig-paren">(</span><em class="sig-param">queries</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_document_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.display_document_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a bar chart (in altair) showing the queries with the largest number of documents.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method requires that you have <code class="code docutils literal notranslate"><span class="pre">altair</span></code> installed. To install,
type <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">text_data[display]</span></code> or <code class="code docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">text_data</span> <span class="pre">-E</span> <span class="pre">display</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queries</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of queries (in the same form you use to search for things)</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.display_document_frequency">
<code class="sig-name descname">display_document_frequency</code><span class="sig-paren">(</span><em class="sig-param">queries</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_document_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.display_document_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays a bar chart showing the percentages of documents with a given query.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method requires that you have <code class="code docutils literal notranslate"><span class="pre">altair</span></code> installed. To install,
type <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">text_data[display]</span></code> or <code class="code docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">text_data</span> <span class="pre">-E</span> <span class="pre">display</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queries</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of queries</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A tokenizer for each query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.display_documents">
<code class="sig-name descname">display_documents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">documents</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.display_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>Display a number of documents, at the specified indexes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A list of document indexes.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.display_occurrence_count">
<code class="sig-name descname">display_occurrence_count</code><span class="sig-paren">(</span><em class="sig-param">queries</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_occurrence_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.display_occurrence_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Display a bar chart showing the number of times a query matches.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method requires that you have <code class="code docutils literal notranslate"><span class="pre">altair</span></code> installed. To install,
type <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">text_data[display]</span></code> or <code class="code docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">add</span> <span class="pre">text_data</span> <span class="pre">-E</span> <span class="pre">display</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>queries</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of queries</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.display_search_results">
<code class="sig-name descname">display_search_results</code><span class="sig-paren">(</span><em class="sig-param">search_query</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em>, <em class="sig-param">max_results=None</em>, <em class="sig-param">window_size=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.display_search_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.display_search_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows the results of a ranked query.</p>
<p>This function runs a query and then renders the result in human-readable
HTML. For each result, you will get a document ID and the count of the result.</p>
<p>In addition, all of the matching occurrences of phrases or words you
searched for will be highlighted in bold. You can optionally decide
how many results you want to return and how long you want each result to be
(up to the length of the whole document).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>search_query</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
<li><p><strong>max_results</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The maximum number of results. If None, returns all results.</p></li>
<li><p><strong>window_size</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The number of characters you want to return around the matching phrase.</p></li>
<li><p><strong>None</strong> (<em>If</em>) – </p></li>
<li><p><strong>the entire document.</strong> (<em>returns</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.flatten">
<code class="sig-name descname">flatten</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flattens a Corpus, converting it into a <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.ranked_search">
<code class="sig-name descname">ranked_search</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.ranked_search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.ranked_search" title="Permalink to this definition">¶</a></dt>
<dd><p>This produces a list of search responses in ranked order.</p>
<p>More specifically, the documents are ranked in order of the
sum of the TF-IDF scores for each word in the query
(with the exception of words that are negated using a NOT operator).</p>
<p>To compute the TF-IDF scores, I simply have computed the dot products
between the raw query counts and the TF-IDF scores of all the unique
words in the query. This is roughly equivalent to the <code class="code docutils literal notranslate"><span class="pre">ltn.lnn</span></code>
normalization scheme
<a class="reference external" href="https://nlp.stanford.edu/IR-book/html/htmledition/document-and-query-weighting-schemes-1.html">described in Manning</a>.
(The catch is that I have normalized the term-frequencies in the document
to the length of the document.)</p>
<p>Each item in the resulting list is a list referring to a single item.
The items inside each of those lists are of the same format you get from
<a class="reference internal" href="#text_data.index.Corpus.search_occurrences" title="text_data.index.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a>. The first item in
each list is either an item having the largest number of words in it
or is the item that’s the nearest to another match within the document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> – Query string</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – Function for tokenizing the results.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#text_data.index.PositionResult" title="text_data.index.PositionResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositionResult</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of tuples, each in the same format as <a class="reference internal" href="#text_data.index.Corpus.search_occurrences" title="text_data.index.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.search_document_count">
<code class="sig-name descname">search_document_count</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_document_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.search_document_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the total number of documents matching a query.</p>
<p>By entering a search, you can get the total number of documents
that match the query.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;the cow was hungry&quot;</span><span class="p">,</span> <span class="s2">&quot;the cow likes the grass&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_count</span><span class="p">(</span><span class="s2">&quot;cow&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_count</span><span class="p">(</span><span class="s2">&quot;grass&quot;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_count</span><span class="p">(</span><span class="s2">&quot;the&quot;</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.search_document_freq">
<code class="sig-name descname">search_document_freq</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_document_freq"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.search_document_freq" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the percentage of documents that match a query.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;the cow was hungry&quot;</span><span class="p">,</span> <span class="s2">&quot;the cow likes the grass&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;cow&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;grass&quot;</span><span class="p">)</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;the grass&quot;</span><span class="p">)</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_document_freq</span><span class="p">(</span><span class="s2">&quot;the OR nonsense&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.search_documents">
<code class="sig-name descname">search_documents</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.search_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>Search documents from a query.</p>
<p>In order to figure out the intracacies of writing queries,
you should view <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a>. In general,
standard boolean (AND, OR, NOT) searches work perfectly reasonably.
You should generally not need to set <code class="code docutils literal notranslate"><span class="pre">query_tokenizer</span></code> to anything
other than the default (string split).</p>
<p>This produces a set of unique documents, where each document is
the index of the document. To view the documents by their ranked importance
(ranked largely using TF-IDF), use <a class="reference internal" href="#text_data.index.Corpus.ranked_search" title="text_data.index.Corpus.ranked_search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ranked_search()</span></code></a>.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is an example&quot;</span><span class="p">,</span> <span class="s2">&quot;here is another&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">search_documents</span><span class="p">(</span><span class="s2">&quot;is&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">search_documents</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A string boolean query (as defined in <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a>)</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A function to tokenize the words in your query. This
allows you to optionally search for words in your index that include
spaces (since it defaults to string.split).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.search_occurrence_count">
<code class="sig-name descname">search_occurrence_count</code><span class="sig-paren">(</span><em class="sig-param">query_string</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_occurrence_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.search_occurrence_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the total number of occurrences you have for the given query.</p>
<p>This just gets the number of items in <a class="reference internal" href="#text_data.Corpus.search_occurrences" title="text_data.Corpus.search_occurrences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_occurrences()</span></code></a>.
As a result, searching for occurrences where two separate words occur will find
the total number of places where either word occurs within the set of documents
where both words appear.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;the cow was hungry&quot;</span><span class="p">,</span> <span class="s2">&quot;the cow likes the grass&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrence_count</span><span class="p">(</span><span class="s2">&quot;the&quot;</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrence_count</span><span class="p">(</span><span class="s2">&quot;the cow&quot;</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrence_count</span><span class="p">(</span><span class="s2">&quot;&#39;the cow&#39;&quot;</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_string</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The query you’re searching for</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizer for the query</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.search_occurrences">
<code class="sig-name descname">search_occurrences</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">query_tokenizer=&lt;method 'split' of 'str' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.search_occurrences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.search_occurrences" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for matching positions within a search.</p>
<p>This allows you to figure out all of the occurrences
matching your query. In addition, this is used internally
to display search results.</p>
<p>Each matching position comes in the form of a tuple where
the first field <code class="code docutils literal notranslate"><span class="pre">doc_id</span></code> refers to the position
of the document, the second field <code class="code docutils literal notranslate"><span class="pre">first_idx</span></code>
refers to the starting index of the occurrence (among
the tokenized documents), <code class="code docutils literal notranslate"><span class="pre">last_idx</span></code> refers to the
last index of the occurrence, <code class="code docutils literal notranslate"><span class="pre">raw_start</span></code> refers
to the starting index of the occurrence from
<em>within the raw, non-tokenized documents.</em> <code class="code docutils literal notranslate"><span class="pre">raw_end</span></code>
refers to the <em>index after the last character of the matching
result</em> within the non-tokenized documents. There is not really
a reason behind this decision.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is fun&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">search_occurrences</span><span class="p">(</span><span class="s2">&quot;&#39;this is&#39;&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">PositionResult(doc_id=0, first_idx=0, last_idx=1, raw_start=0, raw_end=7)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">documents</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">doc_id</span><span class="p">][</span><span class="n">result</span><span class="o">.</span><span class="n">raw_start</span><span class="p">:</span><span class="n">result</span><span class="o">.</span><span class="n">raw_end</span><span class="p">]</span>
<span class="go">&#39;this is&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">tokenized_documents</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">doc_id</span><span class="p">][</span><span class="n">result</span><span class="o">.</span><span class="n">first_idx</span><span class="p">:</span><span class="n">result</span><span class="o">.</span><span class="n">last_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[&#39;this&#39;, &#39;is&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The string query. See <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a> for details.</p></li>
<li><p><strong>query_tokenizer</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – The tokenizing function for the query.
See <a class="reference internal" href="#text_data.query.Query" title="text_data.query.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.query.Query</span></code></a> or <a class="reference internal" href="#text_data.index.Corpus.search_documents" title="text_data.index.Corpus.search_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">search_documents()</span></code></a>
for details.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<a class="reference internal" href="#text_data.index.PositionResult" title="text_data.index.PositionResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositionResult</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.slice">
<code class="sig-name descname">slice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a <code class="code docutils literal notranslate"><span class="pre">Corpus</span></code> object only including the documents listed.</p>
<p>This overrides the method in <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex()</span></code></a>, which
does the same thing (but without making changes to the underlying document set).
This also creates slices of any of the n-gram indexes you have created.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This also changes the indexes for the new corpus so they all go from
0 to <code class="code docutils literal notranslate"><span class="pre">len(indexes)</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A set of document indexes you want to have in the new index.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">,</span> <span class="s2">&quot;yet another&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">add_ngram_index</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_corpus</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">slice</span><span class="p">({</span><span class="mi">1</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sliced_corpus</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another&#39;, 1), (&#39;example&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_corpus</span><span class="o">.</span><span class="n">ngram_indexes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.split_off">
<code class="sig-name descname">split_off</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.split_off"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.split_off" title="Permalink to this definition">¶</a></dt>
<dd><p>This operates like <a class="reference internal" href="#text_data.index.WordIndex.split_off" title="text_data.index.WordIndex.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>.</p>
<p>But it additionally maintains the state of the <a class="reference internal" href="#text_data.Corpus" title="text_data.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> data,
similar to how <a class="reference internal" href="#text_data.index.Corpus.slice" title="text_data.index.Corpus.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a> works.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am an example&quot;</span><span class="p">,</span> <span class="s2">&quot;so am i&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_data</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">split_off</span><span class="p">({</span><span class="mi">0</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;so am i&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_data</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;i am an example&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;am&#39;, 1), (&#39;i&#39;, 1), (&#39;so&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.to_index">
<code class="sig-name descname">to_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.to_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.to_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> object into a <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> object.</p>
<p><a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> objects are convenient because they allow
you to search across documents, in addition to computing statistics about them.
But sometimes, you don’t need that, and the added convenience comes with extra
memory requirements.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.Corpus.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">new_documents</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#Corpus.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.Corpus.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds new documents to the corpus’s index and to the n-gram indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list of new documents. The tokenizer used is the same
tokenizer used to initialize the corpus.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="text_data.WordIndex">
<em class="property">class </em><code class="sig-prename descclassname">text_data.</code><code class="sig-name descname">WordIndex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokenized_documents</span></em>, <em class="sig-param"><span class="n">indexed_locations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An inverted, positional index containing the words in a corpus.</p>
<p>This is designed to allow people to be able to quickly compute statistics
about the language used across a corpus. The class offers a couple of broad
strategies for understanding the ways in which words are used across documents.</p>
<p><strong>Manipulating Indexes</strong>
These functions are designed to allow you to create new indexes based
on ones you already have. They operate kind of like slices and filter
functions in <code class="code docutils literal notranslate"><span class="pre">pandas</span></code>, where your goal is to be able to
create new data structures that you can analyze independently from
ones you’ve already created. Most of them can also be used
with method chaining. However, some of these functions remove
positional information from the index, so be careful.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#text_data.index.WordIndex.copy" title="text_data.index.WordIndex.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a> creates an identical copy of a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>
object.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a>, <a class="reference internal" href="#text_data.index.WordIndex.slice_many" title="text_data.index.WordIndex.slice_many"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice_many()</span></code></a>,
and <a class="reference internal" href="#text_data.index.WordIndex.split_off" title="text_data.index.WordIndex.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>
all take sets of document indexes and create new indexes with only those
documents.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.add_documents" title="text_data.index.WordIndex.add_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_documents()</span></code></a> allows you to add new
documents into an existing <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> object.
<a class="reference internal" href="#text_data.index.WordIndex.concatenate" title="text_data.index.WordIndex.concatenate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concatenate()</span></code></a> similarly combines
<code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> objects into a single <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.flatten" title="text_data.index.WordIndex.flatten"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flatten()</span></code></a> takes a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>
and returns an identical index that only has one document.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.skip_words" title="text_data.index.WordIndex.skip_words"><code class="xref py py-meth docutils literal notranslate"><span class="pre">skip_words()</span></code></a> takes a set of words
and returns a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> that does not have those words.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.reset_index" title="text_data.index.WordIndex.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset_index()</span></code></a> changes the index of words.</p></li>
</ul>
<p><strong>Corpus Information</strong></p>
<p>A number of functions are designed to allow you to look up information
about the corpus. For instance, you can collect a sorted list
or a set of all the unique words in the corpus. Or you can get a list
of the most commonly appearing elements:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#text_data.index.WordIndex.vocab" title="text_data.index.WordIndex.vocab"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vocab</span></code></a> and <a class="reference internal" href="#text_data.index.WordIndex.vocab_list" title="text_data.index.WordIndex.vocab_list"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vocab_list</span></code></a>
both return the unique words or phrases appearing in the index.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.vocab_size" title="text_data.index.WordIndex.vocab_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">vocab_size</span></code></a> gets the number of unique words in the index.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.num_words" title="text_data.index.WordIndex.num_words"><code class="xref py py-attr docutils literal notranslate"><span class="pre">num_words</span></code></a> gets the total number of words in the index.</p></li>
<li><p><a class="reference internal" href="#text_data.index.WordIndex.doc_lengths" title="text_data.index.WordIndex.doc_lengths"><code class="xref py py-attr docutils literal notranslate"><span class="pre">doc_lengths</span></code></a> gets a dictionary mapping documents to
the number of tokens, or words, they contain.</p></li>
</ul>
<p><strong>Word Statistics</strong></p>
<p>These allow you to gather statistics about single words
or about word, document pairs. For instance, you can see
how many words there are in the corpus, how many unique words there are,
or how often a particular word appears in a document.</p>
<p>The statistics generally fit into four categories.
The first category computes statistics about how often a specific word appears
in the corpus as a whole. The second category computes statistics
about how often a specific word appears in a specific document.
The third and fourth categories echo those first two categories
but perform the statistics efficiently across the corpus as a whole,
creating 1-dimensional numpy arrays in the case of the word-corpus
statistics and 2-dimensional numpy arrays in the case of the word-document
statistics. Functions in these latter two categories all end in
<code class="code docutils literal notranslate"><span class="pre">_vector</span></code> and <code class="code docutils literal notranslate"><span class="pre">_matrix</span></code> respectively.</p>
<p>Here’s how those statistics map to one another:</p>
<table class="colwidths-given docutils align-default" id="id6">
<caption><span class="caption-text">Word Statistics</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Word-Corpus</p></th>
<th class="head"><p>Word-Document</p></th>
<th class="head"><p>Vector</p></th>
<th class="head"><p>Matrix</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#text_data.index.WordIndex.word_count" title="text_data.index.WordIndex.word_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_count()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.term_count" title="text_data.index.WordIndex.term_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">term_count()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.word_count_vector" title="text_data.index.WordIndex.word_count_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_count_vector()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.count_matrix" title="text_data.index.WordIndex.count_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count_matrix()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#text_data.index.WordIndex.word_frequency" title="text_data.index.WordIndex.word_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_frequency()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.term_frequency" title="text_data.index.WordIndex.term_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">term_frequency()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.word_freq_vector" title="text_data.index.WordIndex.word_freq_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">word_freq_vector()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.frequency_matrix" title="text_data.index.WordIndex.frequency_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">frequency_matrix()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#text_data.index.WordIndex.document_count" title="text_data.index.WordIndex.document_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">document_count()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.doc_count_vector" title="text_data.index.WordIndex.doc_count_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doc_count_vector()</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#text_data.index.WordIndex.document_frequency" title="text_data.index.WordIndex.document_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">document_frequency()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.doc_freq_vector" title="text_data.index.WordIndex.doc_freq_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doc_freq_vector()</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#text_data.index.WordIndex.idf" title="text_data.index.WordIndex.idf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">idf()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.idf_vector" title="text_data.index.WordIndex.idf_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">idf_vector()</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_word" title="text_data.index.WordIndex.odds_word"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_word()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_document" title="text_data.index.WordIndex.odds_document"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_document()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_vector" title="text_data.index.WordIndex.odds_vector"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_vector()</span></code></a></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.odds_matrix" title="text_data.index.WordIndex.odds_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_matrix()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">__contains__</span></code></p></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.doc_contains" title="text_data.index.WordIndex.doc_contains"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doc_contains()</span></code></a></p></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.one_hot_matrix" title="text_data.index.WordIndex.one_hot_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">one_hot_matrix()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p><a class="reference internal" href="#text_data.index.WordIndex.tfidf_matrix" title="text_data.index.WordIndex.tfidf_matrix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tfidf_matrix()</span></code></a></p></td>
</tr>
</tbody>
</table>
<p>In the case of the vector and matrix calculations, the arrays
represent the unique words of the vocabulary,
presented in sorted order. As a result, you can safely run
element-wise calculations over the matrices.</p>
<p>In addition to the term vector and term-document matrix functions, there is
<a class="reference internal" href="#text_data.index.WordIndex.get_top_words" title="text_data.index.WordIndex.get_top_words"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_top_words()</span></code></a>, which is designed
to allow you to find the highest or lowest scores and their associated words along any
term vector or term-document matrix you please.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the most part, you will not want to instantiate <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> directly.
Instead, you will likely use <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a>, which subclasses
<code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>.</p>
<p>That’s because <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> offers utilities for searching through
documents. In addition, with the help of tools from <a class="reference internal" href="#module-text_data.tokenize" title="text_data.tokenize"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text_data.tokenize</span></code></a>,
instantiating <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> objects is a bit simpler than
instantiating <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> objects directly.</p>
<p>I particularly recommend that you <strong>do not</strong> instantiate the
<code class="code docutils literal notranslate"><span class="pre">indexed_locations</span></code> directly (i.e. outside of <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a>).
The only way you can do anything with <code class="code docutils literal notranslate"><span class="pre">indexed_locations</span></code> from outside of
<a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">Corpus</span></code></a> is by using an internal attribute
and hacking through poorly documented Rust code.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenized_documents</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of documents where each document is a list of words.</p></li>
<li><p><strong>indexed_locations</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]) – A list of documents where each documents contains a list
of the start end positions of the words in <code class="code docutils literal notranslate"><span class="pre">tokenized_documents</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="text_data.WordIndex.add_documents">
<code class="sig-name descname">add_documents</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokenized_documents</span></em>, <em class="sig-param"><span class="n">indexed_locations</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.add_documents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.add_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>This function updates the index with new documents.</p>
<p>It operates similarly to <a class="reference internal" href="#text_data.index.Corpus.update" title="text_data.index.Corpus.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.Corpus.update()</span></code></a>,
taking new documents and mutating the existing one.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tokenized_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;im just a simple document&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">(</span><span class="n">tokenized_words</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">num_words</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">add_documents</span><span class="p">([</span><span class="s2">&quot;now im an entire corpus&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">num_words</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.concatenate">
<code class="sig-name descname">concatenate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">ignore_index</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.concatenate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> object with the documents of both this object and the other.</p>
<p>See <a class="reference internal" href="#text_data.multi_corpus.concatenate" title="text_data.multi_corpus.concatenate"><code class="xref py py-func docutils literal notranslate"><span class="pre">text_data.multi_corpus.concatenate()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ignore_index</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to <code class="code docutils literal notranslate"><span class="pre">True</span></code>, which is the default, the
document indexes will be re-indexed starting from 0.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="code docutils literal notranslate"><span class="pre">ignore_index</span></code> is set to <code class="code docutils literal notranslate"><span class="pre">False</span></code> and some
    of the indexes overlap.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a copy of itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.count_matrix">
<code class="sig-name descname">count_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.count_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.count_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matrix showing the number of times each word appeared in each document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">count_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.doc_contains">
<code class="sig-name descname">doc_contains</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.doc_contains"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.doc_contains" title="Permalink to this definition">¶</a></dt>
<dd><p>States whether the given document contains the word.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="s2">&quot;more words&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_contains</span><span class="p">(</span><span class="s2">&quot;more&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_contains</span><span class="p">(</span><span class="s2">&quot;more&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the document you’re looking up doesn’t exist.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.doc_count_vector">
<code class="sig-name descname">doc_count_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.doc_count_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.doc_count_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of documents each word appears in.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_count_vector</span><span class="p">()</span>
<span class="go">array([1., 2.])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.doc_freq_vector">
<code class="sig-name descname">doc_freq_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.doc_freq_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.doc_freq_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the proportion of documents each word appears in.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">doc_freq_vector</span><span class="p">()</span>
<span class="go">array([0.5, 1. ])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.doc_lengths">
<em class="property">property </em><code class="sig-name descname">doc_lengths</code><a class="headerlink" href="#text_data.WordIndex.doc_lengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary mapping the document indices to their lengths.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">,</span> <span class="s2">&quot;a cat&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">doc_lengths</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.docs_with_word">
<code class="sig-name descname">docs_with_word</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.docs_with_word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.docs_with_word" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the documents containing a word.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another document&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">docs_with_word</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">docs_with_word</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.document_count">
<code class="sig-name descname">document_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.document_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.document_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of documents a word appears in.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_count</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_count</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.document_frequency">
<code class="sig-name descname">document_frequency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.document_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.document_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the percentage of documents that contain a word.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_frequency</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">document_frequency</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span>
<span class="go">0.5</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.flatten">
<code class="sig-name descname">flatten</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flattens a multi-document index into a single-document corpus.</p>
<p>This creates a new <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> object stripped of any positional
information that has a single document in it. However, the list of words
and their indexes remain.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am a document&quot;</span><span class="p">,</span> <span class="s2">&quot;so am i&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flattened</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">flattened</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span> <span class="o">==</span> <span class="n">flattened</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.frequency_matrix">
<code class="sig-name descname">frequency_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.frequency_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.frequency_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matrix showing the frequency of each word appearing in each document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">frequency_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]]</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.get_top_words">
<code class="sig-name descname">get_top_words</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">term_matrix</span></em>, <em class="sig-param"><span class="n">top_n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reverse</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.get_top_words"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.get_top_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the top values along a term matrix.</p>
<p>Given a matrix where each row represents a word in your vocabulary,
this returns a numpy matrix of those top values, along with an array
of their respective words.</p>
<p>You can choose the number of results you want to get by setting
<code class="code docutils literal notranslate"><span class="pre">top_n</span></code> to some positive value, or you can leave it be and return
all of the results in sorted order. Additionally, by setting
<code class="code docutils literal notranslate"><span class="pre">reverse</span></code> to False (instead of its default of <code class="code docutils literal notranslate"><span class="pre">True</span></code>), you can
return the scores from smallest to largest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>term_matrix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>) – a matrix of floats where each row represents a word</p></li>
<li><p><strong>top_n</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The number of values you want to return. If None, returns
all values.</p></li>
<li><p><strong>reverse</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true (the default), returns the N values with the highest scores.
If false, returns the N values with the lowest scores.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple of 2-dimensional numpy arrays, where the first item
is an array of the top-scoring words and the second item
is an array of the top scores themselves. Both arrays
are of the same size, that is <code class="code docutils literal notranslate"><span class="pre">min(self.vocab_size,</span> <span class="pre">top_n)</span></code>
by the number of columns in the term matrix.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="code docutils literal notranslate"><span class="pre">top_n</span></code> is less than 1, if there are
    not the same number of rows in the matrix as there are unique
    words in the index, or if the numpy array doesn’t have 1 or 2 dimensions.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The first thing you need to do in order to use this function is create
a 1- or 2-dimensional term matrix, where the number of rows
corresponds to the number of unique words in the corpus. Any of the
functions within <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> that ends in <code class="code docutils literal notranslate"><span class="pre">_matrix(**kwargs)</span></code>
(for 2-dimensional arrays) or <code class="code docutils literal notranslate"><span class="pre">_vector(**kwargs)</span></code> (for 1-dimensional
arrays) will do the trick here. I’ll show an example with both a
word count vector and a word count matrix:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;The cat is near the birds&quot;</span><span class="p">,</span> <span class="s2">&quot;The birds are distressed&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">get_top_words</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count_vector</span><span class="p">(),</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">(array([&#39;the&#39;, &#39;birds&#39;], dtype=&#39;&lt;U10&#39;), array([3., 2.]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">get_top_words</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">count_matrix</span><span class="p">(),</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(array([[&#39;the&#39;, &#39;the&#39;]], dtype=&#39;&lt;U10&#39;), array([[2., 1.]]))</span>
</pre></div>
</div>
<p>Similarly, you can return the scores from lowest to highest by setting <code class="code docutils literal notranslate"><span class="pre">reverse=False</span></code>.
(This is not the default.):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">get_top_words</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span> <span class="o">*</span> <span class="n">corpus</span><span class="o">.</span><span class="n">word_count_vector</span><span class="p">(),</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">(array([&#39;the&#39;, &#39;birds&#39;], dtype=&#39;&lt;U10&#39;), array([-3., -2.]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.idf">
<code class="sig-name descname">idf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.idf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.idf" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the inverse document frequency.</p>
<p>If the number of documents in your <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code>
<code class="code docutils literal notranslate"><span class="pre">index</span></code> is <span class="math">\(N\)</span> and the document frequency from
<a class="reference internal" href="#text_data.index.WordIndex.document_frequency" title="text_data.index.WordIndex.document_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">document_frequency()</span></code></a> is
<span class="math">\(df\)</span>, the inverse document frequency is <span class="math">\(\frac{N}{df}\)</span>.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">idf</span><span class="p">(</span><span class="s2">&quot;example&quot;</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">idf</span><span class="p">(</span><span class="s2">&quot;another&quot;</span><span class="p">)</span>
<span class="go">2.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking for.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.idf_vector">
<code class="sig-name descname">idf_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.idf_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.idf_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the inverse document frequency vector.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">idf_vector</span><span class="p">()</span>
<span class="go">array([2., 1.])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.max_word_count">
<code class="sig-name descname">max_word_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.max_word_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.max_word_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the most common word and the number of times it appeared in the corpus.</p>
<p>Returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> if there are no words in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">max_word_count</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s2">&quot;a bird a plane superman&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">max_word_count</span><span class="p">()</span>
<span class="go">(&#39;a&#39;, 2)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.most_common">
<code class="sig-name descname">most_common</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num_words</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.most_common"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.most_common" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the most common items.</p>
<p>This is nearly identical to <code class="code docutils literal notranslate"><span class="pre">collections.Counter.most_common</span></code>.
However, unlike <cite>collections.Counter.most_common</cite>, the values that
are returned appear in alphabetical order.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i walked to the zoo&quot;</span><span class="p">,</span> <span class="s2">&quot;i bought a zoo&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;i&#39;, 2), (&#39;zoo&#39;, 2), (&#39;a&#39;, 1), (&#39;bought&#39;, 1), (&#39;the&#39;, 1), (&#39;to&#39;, 1), (&#39;walked&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[(&#39;i&#39;, 2), (&#39;zoo&#39;, 2)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_words</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The number of words you return. If you enter None
or you enter a number larger than the total number of words,
it returns all of the words, in sorted order from most common to least common.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.num_words">
<em class="property">property </em><code class="sig-name descname">num_words</code><a class="headerlink" href="#text_data.WordIndex.num_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of words in the corpus (not just unique).</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">num_words</span>
<span class="go">5</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.odds_document">
<code class="sig-name descname">odds_document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em>, <em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.odds_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the odds of finding a word in a document.</p>
<p>This is the equivalent of <a class="reference internal" href="#text_data.index.WordIndex.odds_word" title="text_data.index.WordIndex.odds_word"><code class="xref py py-meth docutils literal notranslate"><span class="pre">odds_word()</span></code></a>.
But insteasd of calculating items at the word-corpus level, the calculations
are performed at the word-document level.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is a document&quot;</span><span class="p">,</span> <span class="s2">&quot;document two&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_document</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_document</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document</p></li>
<li><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, returns the log-odds of finding the word in the document.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the document doesn’t exist.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.odds_matrix">
<code class="sig-name descname">odds_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">add_k</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.odds_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the odds of finding a word in a document for every possible word-document pair.</p>
<p>Because not all words are likely to appear in all of the documents,
this implementation adds <code class="code docutils literal notranslate"><span class="pre">1</span></code> to all of the numerators before taking the
frequencies. So</p>
<p><span class="math">\(O(w) = \frac{c_{i} + 1}{N + \vert V \vert}\)</span></p>
<p>where <span class="math">\(\vert V \vert\)</span> is the total number of unique words in each document,
<span class="math">\(N\)</span> is the total number of total words in each document, and <span class="math">\(c_i\)</span>
is the count of a word in a document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_matrix</span><span class="p">()</span>
<span class="go">array([[0.33333333, 1.        ],</span>
<span class="go">       [1.        , 0.33333333],</span>
<span class="go">       [1.        , 1.        ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_matrix</span><span class="p">(</span><span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[-1.5849625,  0.       ],</span>
<span class="go">       [ 0.       , -1.5849625],</span>
<span class="go">       [ 0.       ,  0.       ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, computes the log-odds.</p></li>
<li><p><strong>add_k</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – This adds <code class="code docutils literal notranslate"><span class="pre">k</span></code> to each of the non-zero elements in the matrix.
Since <span class="math">\(\log{1} = 0\)</span>, this prevents 50 percent probabilities
from appearing to be the same as elements that don’t exist.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.odds_vector">
<code class="sig-name descname">odds_vector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.odds_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a vector of the odds of each word appearing at random.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_vector</span><span class="p">()</span>
<span class="go">array([0.2, 1. , 0.2, 0.2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_vector</span><span class="p">(</span><span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([-2.32192809,  0.        , -2.32192809, -2.32192809])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, returns the log odds.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.odds_word">
<code class="sig-name descname">odds_word</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">sublinear</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.odds_word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.odds_word" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the odds of seeing a word at random.</p>
<p>In statistics, the <em>odds</em> of something happening are the probability
of it happening, versus the probability of it not happening,
that is <span class="math">\(\frac{p}{1 - p}\)</span>. The “log odds” of
something happening — the result of using <code class="code docutils literal notranslate"><span class="pre">self.log_odds_word</span></code> —
is similarly equivalent to <span class="math">\(log_{2}{\frac{p}{1 - p}}\)</span>.</p>
<p>(The probability in this case is simply the word frequency.)</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i like odds ratios&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_word</span><span class="p">(</span><span class="s2">&quot;odds&quot;</span><span class="p">),</span> <span class="mf">1.</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">odds_word</span><span class="p">(</span><span class="s2">&quot;odds&quot;</span><span class="p">,</span> <span class="n">sublinear</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mf">3.</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p></li>
<li><p><strong>sublinear</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If true, returns the</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.one_hot_matrix">
<code class="sig-name descname">one_hot_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.one_hot_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.one_hot_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matrix showing whether each given word appeared in each document.</p>
<p>For these matrices, all cells contain a floating point value of either a
1., if the word is in that document, or a 0. if the word is not in the document.</p>
<p>These are sometimes referred to as ‘one-hot encoding matrices’ in machine learning.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">corpus</span><span class="o">.</span><span class="n">one_hot_matrix</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.reset_index">
<code class="sig-name descname">reset_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_idx</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.reset_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.reset_index" title="Permalink to this definition">¶</a></dt>
<dd><p>An in-place operation that resets the document indexes for this corpus.</p>
<p>When you reset the index, all of the documents change their
values, starting at <code class="code docutils literal notranslate"><span class="pre">start_idx</span></code> (and incrementing from there). For the most
part, you will not need to do this, since most of the library
does not give you the option to change the document indexes. However,
it may be useful when you’re using <a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a>
or <a class="reference internal" href="#text_data.index.WordIndex.split_off" title="text_data.index.WordIndex.split_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_off()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>start_idx</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – The first (lowest) document index you want to set.
Values must be positive. Defaults to 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.skip_words">
<code class="sig-name descname">skip_words</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">words</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.skip_words"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.skip_words" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="code docutils literal notranslate"><span class="pre">WordIndex</span></code> without any of the skipped words.</p>
<p>This enables you to create an index that does not contain rare
words, for example. The index will not have any positions
associated with them, so be careful when implementing
it on a <a class="reference internal" href="#text_data.index.Corpus" title="text_data.index.Corpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">text_data.index.Corpus</span></code></a> object.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">skip_words</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;document&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;document&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;document&quot;</span> <span class="ow">in</span> <span class="n">corpus</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">without_document</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">skip_words</span><span class="p">(</span><span class="n">skip_words</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;document&quot;</span> <span class="ow">in</span> <span class="n">without_document</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.slice">
<code class="sig-name descname">slice</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an index that just contains documents from the set of words.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A set of index values for the documents.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;example&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;another&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;example&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_idx</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">slice</span><span class="p">({</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sliced_idx</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliced_idx</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another&#39;, 1), (&#39;example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.slice_many">
<code class="sig-name descname">slice_many</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.slice_many"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.slice_many" title="Permalink to this definition">¶</a></dt>
<dd><p>This operates like <a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a> but creates multiple <a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a> objects.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example document&quot;</span><span class="p">,</span> <span class="s2">&quot;another example&quot;</span><span class="p">,</span> <span class="s2">&quot;yet another&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">third</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">slice_many</span><span class="p">([{</span><span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">}])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;example document&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">second</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;another example&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">third</span><span class="o">.</span><span class="n">documents</span>
<span class="go">[&#39;yet another&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes_list</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – A list of sets of indexes. See <a class="reference internal" href="#text_data.index.WordIndex.slice" title="text_data.index.WordIndex.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">text_data.index.WordIndex.slice()</span></code></a> for details.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.split_off">
<code class="sig-name descname">split_off</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">indexes</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.split_off"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.split_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an index with just a set of documents, while removing them from the index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A set of index values for the documents.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This removes words from the index inplace. So be make sure you
want to do that before using this function.</p>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">WordIndex</span><span class="p">([[</span><span class="s2">&quot;example&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;document&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;another&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;example&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_idx</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">split_off</span><span class="p">({</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">split_idx</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split_idx</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;another&#39;, 1), (&#39;example&#39;, 1)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">most_common</span><span class="p">()</span>
<span class="go">[(&#39;document&#39;, 1), (&#39;example&#39;, 1)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#text_data.index.WordIndex" title="text_data.index.WordIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">WordIndex</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.term_count">
<code class="sig-name descname">term_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.term_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.term_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of times a word appeared in a document.</p>
<p>Assuming the document exists, returns 0 if the word does not
appear in the document.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;i am just thinking random thoughts&quot;</span><span class="p">,</span> <span class="s2">&quot;am i&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">term_count</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">term_count</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up.</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If you selected a document</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.term_frequency">
<code class="sig-name descname">term_frequency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em>, <em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.term_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.term_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the proportion of words in document <code class="code docutils literal notranslate"><span class="pre">document</span></code> that are <code class="code docutils literal notranslate"><span class="pre">word</span></code>.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;just coming up with words&quot;</span><span class="p">,</span> <span class="s2">&quot;more words&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">term_frequency</span><span class="p">(</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">term_frequency</span><span class="p">(</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up</p></li>
<li><p><strong>document</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The index of the document</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the document you’re looking up doesn’t exist</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.tfidf_matrix">
<code class="sig-name descname">tfidf_matrix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">norm</span><span class="o">=</span><span class="default_value">'l2'</span></em>, <em class="sig-param"><span class="n">use_idf</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">smooth_idf</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">sublinear_tf</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">add_k</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.tfidf_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.tfidf_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>This creates a term-document TF-IDF matrix from the index.</p>
<p>In natural language processing, TF-IDF is a mechanism for finding
out which words are distinct across documents. It’s used particularly
widely in information retrieval, where your goal is to rank documents
that you know match a query by how relevant you think they’ll be.</p>
<p>The basic intuition goes like this: If a word appears particularly
frequently in a document, it’s probably more relevant to that document
than if the word occurred more rarely. But, some words are simply
common: If document X uses the word ‘the’ more often than the word
‘idiomatic,’ that really tells you more about the words ‘the’ and
‘idiomatic’ than it does about the document.</p>
<p>TF-IDF tries to balance these two competing interests by taking the
‘term frequency,’ or how often a word appears in the document,
and normalizing it by the ‘document frequency,’ or the proportion
of documents that contain the word. This has the effect of reducing
the weights of common words (and even setting the weights of some
very common words to 0 in some implementations).</p>
<p>It should be noted that there are a number of different implementations
of TF-IDF. Within information retrieval, TF-IDF is part of the <a class="reference external" href="https://en.wikipedia.org/wiki/SMART_Information_Retrieval_System">‘SMART
Information Retrieval System’</a>.
Although the exact equations can vary considerably, they typically follow the same approach:
First, they find some value to represent the frequency of each word in the
document. Often (but not always), this is just the raw number of times
in which a word appeared in the document. Then, they normalize that
based on the document frequency. And finally, they normalize
those values based on the length of the document, so that long documents
are not weighted more favorably (or less favorably) than shorter documents.</p>
<p>The approach that I have taken to this is shamelessly cribbed from
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfTransformer.html">scikit’s TfidfTransformer</a>.
Specifically, I’ve allowed for some customization of the specific formula
for TF-IDF while not including methods that require access to the raw
documents, which would be computationally expensive to perform. This allows
for the following options:</p>
<ul class="simple">
<li><p>You can set the term frequency to either take the raw count of the word
in the document (<span class="math">\(c_{t,d}\)</span>) or by using <code class="code docutils literal notranslate"><span class="pre">sublinear_tf=True</span></code>
and taking <span class="math">\(1 + \log_{2}{c_{t,d}}\)</span></p></li>
<li><p>You can skip taking the inverse document frequency <span class="math">\(df^{-1}\)</span>
altogether by setting <code class="code docutils literal notranslate"><span class="pre">use_idf=False</span></code> or you can smooth the inverse
document frequency by setting <code class="code docutils literal notranslate"><span class="pre">smooth_idf=True</span></code>.
This adds one to the numerator and the denominator. (<strong>Note:</strong> Because
this method is only run on a vocabulary of words that are in the corpus,
there can’t be any divide by zero errors, but this allows you to
replicate scikit’s <code class="code docutils literal notranslate"><span class="pre">TfidfTransformer</span></code>.)</p></li>
<li><p>You can add some number to the logged inverse document frequency
by setting <code class="code docutils literal notranslate"><span class="pre">add_k</span></code> to something other than 1. This is the only
difference between this implementation and scikits, as scikit automatically
setts <code class="code docutils literal notranslate"><span class="pre">k</span></code> at 1.</p></li>
<li><p>Finally, you can choose how to normalize the document lengths. By default,
this takes the L-2 norm, or <span class="math">\(\sqrt{\sum{w_{i,k}^{2}}}\)</span>, where <span class="math">\(w_{i,k}\)</span>
is the weight you get from multiplying the term frequency by the inverse document
frequency. But you can also set the norm to <code class="code docutils literal notranslate"><span class="pre">'l1'</span></code> to get the L1-norm,
or <span class="math">\(\sum{\vert w_{i,k} \vert}\)</span>. Or you can set it to <code class="code docutils literal notranslate"><span class="pre">None</span></code> to avoid
doing any document-length normalization at all.</p></li>
</ul>
<p class="rubric">Examples</p>
<p>To get a sense of the different options, let’s start by creating
a pure count matrix with this method. To do that, we’ll set
<code class="code docutils literal notranslate"><span class="pre">norm=None</span></code> so we’re not normalizing by the length of the document,
<code class="code docutils literal notranslate"><span class="pre">use_idf=False</span></code> so we’re not doing anything with the document
frequency, and <code class="code docutils literal notranslate"><span class="pre">sublinear_tf=False</span></code> so we’re not taking the
logged counts:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tfidf_count_matrix</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">tfidf_count_matrix</span><span class="p">,</span> <span class="n">corpus</span><span class="o">.</span><span class="n">count_matrix</span><span class="p">())</span>
</pre></div>
</div>
<p>In this particular case, setting <code class="code docutils literal notranslate"><span class="pre">sublinear_tf</span></code> to <code class="code docutils literal notranslate"><span class="pre">True</span></code>
will produce the same result since all of the counts are 1 or 0
and <span class="math">\(\log{1} + 1 = 1\)</span>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">tfidf_count_matrix</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, we can incorporate the inverse document frequency. Because the word
‘a’ appears in both documents, its inverse document frequency in is 1;
the inverse document frequency of ‘cat’ is 2, since ‘cat’ appears in half
of the documents. We’re additionally taking the base-2 log of the inverse document
frequency and adding 1 to the final result. So we get:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">idf_add_1</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smooth_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">idf_add_1</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]]</span>
</pre></div>
</div>
<p>Or we can add nothing to the logged values:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">idf</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smooth_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_k</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">idf</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span>
</pre></div>
</div>
<p>The L-1 norm normalizes the results by the sum of the absolute values of their
weights. In the case of the count matrix, this is equivalent to creating
the frequency matrix:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tfidf_freq_mat</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">tfidf_matrix</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="n">use_idf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sublinear_tf</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">tfidf_freq_mat</span><span class="p">,</span> <span class="n">corpus</span><span class="o">.</span><span class="n">frequency_matrix</span><span class="p">())</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>norm</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Set to ‘l2’ for the L2 norm (square root of the sums of the square weights),
‘l1’ for the l1 norm (the summed absolute value, or None for no normalization).</p></li>
<li><p><strong>use_idf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If you set this to False, the weights will only include the term frequency
(adjusted however you like)</p></li>
<li><p><strong>smooth_idf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Adds a constant to the numerator and the denominator.</p></li>
<li><p><strong>sublinear_tf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Computes the term frequency in log space.</p></li>
<li><p><strong>add_k</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – This adds k to every value in the IDF. scikit adds 1
to all documents, but this allows for more variable computing
(e.g. adding 0 if you want to remove words appearing in every document)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.vocab">
<em class="property">property </em><code class="sig-name descname">vocab</code><a class="headerlink" href="#text_data.WordIndex.vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all of the unique words in the index.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">vocab</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="s2">&quot;dog&quot;</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.vocab_list">
<em class="property">property </em><code class="sig-name descname">vocab_list</code><a class="headerlink" href="#text_data.WordIndex.vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorted list of the words appearing in the index.</p>
<p>This is primarily intended for use in matrix or vector functions,
where the order of the words matters.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">vocab_list</span>
<span class="go">[&#39;a&#39;, &#39;and&#39;, &#39;cat&#39;, &#39;dog&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.vocab_size">
<em class="property">property </em><code class="sig-name descname">vocab_size</code><a class="headerlink" href="#text_data.WordIndex.vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of unique words in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a cat and a dog&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">vocab_size</span>
<span class="go">4</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.word_count">
<code class="sig-name descname">word_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.word_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of times the word appeared.</p>
<p>Defaults to 0 if the word never appeared.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is a document&quot;</span><span class="p">,</span> <span class="s2">&quot;a bird and a plane&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count</span><span class="p">(</span><span class="s2">&quot;malarkey&quot;</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The string word (or phrase).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.word_count_vector">
<code class="sig-name descname">word_count_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_count_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.word_count_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of times each word appeared in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_count_vector</span><span class="p">()</span>
<span class="go">array([1., 3., 1., 1.])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.word_counter">
<code class="sig-name descname">word_counter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_counter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.word_counter" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps the documents containing a word to the number of times the word appeared.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;a bird&quot;</span><span class="p">,</span> <span class="s2">&quot;a bird and a plane&quot;</span><span class="p">,</span> <span class="s2">&quot;two birds&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_counter</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The word you’re looking up</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary mapping the document index of the word to the number of times</dt><dd><p>it appeared in that document.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.word_freq_vector">
<code class="sig-name descname">word_freq_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_freq_vector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.word_freq_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the frequency in which each word appears over the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;example&quot;</span><span class="p">,</span> <span class="s2">&quot;this example is another example&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">word_freq_vector</span><span class="p">()</span>
<span class="go">array([0.16666667, 0.5       , 0.16666667, 0.16666667])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="text_data.WordIndex.word_frequency">
<code class="sig-name descname">word_frequency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/text_data/index.html#WordIndex.word_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#text_data.WordIndex.word_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the frequency in which the word appeared in the corpus.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">([</span><span class="s2">&quot;this is fun&quot;</span><span class="p">,</span> <span class="s2">&quot;or is it&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">word_frequency</span><span class="p">(</span><span class="s2">&quot;fun&quot;</span><span class="p">),</span> <span class="mf">1.</span> <span class="o">/</span> <span class="mf">6.</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">word_frequency</span><span class="p">(</span><span class="s2">&quot;is&quot;</span><span class="p">),</span> <span class="mf">2.</span> <span class="o">/</span> <span class="mf">6.</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>word</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The string word or phrase.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Max Lee.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>